## 01. 需求收集

### 2020-04-02

1、行和列同时批量编号。—— 已完成（V2.1）

调试的时候发现一直到不到预期的效果。后来发现其实是图框没有对齐的原因。

### 2020-04-07

1、导出数据可以选择性导出。—— 已完成（V2.1）

## 02. 建议收集

## 03. 修改记录及 bug

1、自动编号，管道里氮气管中，前缀的代号没嵌入进去。

解决方案：管道的匹配逻辑修改。—— 已修复（V2.1）

贡献者：杨帆（2021-04-07）。

```c
; ready for refactor - 2021-03-05
; refactored at 2021-04-07
(defun GetPipeCodeNameByNumberMode (originString numberMode drawNum startNumberString dataType /) 
  (setq drawNum (RegExpReplace (ExtractDrawNumUtils drawNum) "0(\\d)-(\\d*)" (strcat "$1" "$2") nil nil))
  (cond 
    ((= numberMode "0") (RegExpReplace originString "([A-Za-z]+)(\\d*).*" (strcat "$1" startNumberString drawNum "$2") nil nil))
    ; bug 不按流程图编，按单体号（1A3）有问题，提取逻辑做了修改 - 2021-03-02
    ; 补充：因为该函数与处理设备位号编号共用，按之前逻辑改后，设备位号编号又不对了，目前加了分支处理 - 2021-03-05
     ((= numberMode "1") 
      (if (= dataType "Pipe") 
        ; fix bug - 管道原来的匹配模式匹配不到氮气管道 N 2021-04-07
        (RegExpReplace originString "([A-Za-z]?[0-9]?[A-Za-z]+)(\\d*).*" (strcat "$1" startNumberString "$2") nil nil)
        (RegExpReplace originString "([A-Za-z]+)(\\d*).*" (strcat "$1" startNumberString "$2") nil nil)
      )
     )
  ) 
)
```

