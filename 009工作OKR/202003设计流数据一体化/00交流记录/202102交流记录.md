## 20210501与谢雨东交流洁净空调

1、散热散湿计算，增加了「人」的散热散湿。

原来做全面通风的时候只考虑设备，这里给我的感觉，「人」反而是散热散湿的大头。

2、压入压出目前的算法是直接给定的。

压入压出跟建筑有关系的。门的大小，有个数据。比如一更和二更之间有 5Pa/10Pa 的压力，单扇门。单扇门在 5Pa 压差的情况下，门缝里会压入压出一定风量的，这就这里的压入压出风量。只要给压出、门的个数、门的大小，是可以获取压入压出风量这个数据的。

目前的做法是偷懒不算的，反正整个系统是平衡的，无非是从这个房间到那个房间。以后是要算的。先打通逻辑的时候接口预留，都按压入压出风量都按 0 考虑。差异体现在单个房间的补风量，比如本来这个房间的压出风量大一些，那么补风就稍微多补一些，但总的「量」是不变的。对流程图来说，单个房间就少了这块内容，压入压出的风量。

3、正压风量只能室压、房间体积有关系。

正压风量是保证这个房间的正压，是把「风」压到吊顶里去的风量，一个小的风量，是压到外面去的。

4、冬天的风量是反算的，只要是算夏天的风量。

先给定一个夏季的温差，比如 4℃。相对来说，冷负荷比热负荷要大，一般情况都是这样的，所以可以用反算的方式。

首先，先算夏季负荷风量。先通过夏季余热、夏季送风温差（4℃）算出夏季负荷风量。

夏季负荷风量（计算输入参数：夏季余热、夏季送风温差，冬季负荷风量同夏季相同）

接着按换气次数算出一个风量。比如这个房间，要求最低换气次数是 20 次，按这个算出一个风量。夏季负荷风量和换气次数风量会有一个对比，先按整个系统的，这两个风量数据来对比，越接近越好。如果误差在 10% 以内，那么不用调送风温差这个数据（4℃），如果误差超了，调到 3.5 或 4.5，如果达标了算是系统复核好了。接着去核对单个房间的 2 个风量，两个风量系统控在 20% 以内，以内的话达标，超了的话通过调整换气次数来使之达标。

谢：有个毛病。所有送风温差是一样的，因为风是从一个地方来的，所以要先根据所有房间是一样的来算负荷的量，比如开始都按 4℃。有些房间按 4 来算多了，有些房间按 4 来算不够，这里就有一个偏差。偏差不大无所谓，偏差很多的话就需要干预了。干预的方式比较多了，第一个是调换气次数，第二个是调送风温差，但掉送风温差的话我的整个系统就变了，我可能末端要加「标准器」了，这是比较大的改动（不推荐）。所以我们都是调换气次数的。因为换气次数本来就是可以调的。但是送风温差也要保持到可修改的状态，因为有可能换气次数调不过来。

最后再反算冬季送风温差。只要看一下结果，但有可能会有很「夸张」的情况，这时候就要干预了。换气量有了（冬季负荷风量同夏季相同），热量有了，反过来算温差即可。为啥冬季负荷风量同夏季相同？整个系统的风量一年四季肯定是一样的，因为夏天需要的风量肯定比冬天大，我们以大的为准。

夏季送风温差（可干预；夏季负荷风量、与最小换气次数的风量对比，先系统对比，10% 以内达标（不达标调送风温差）。每个房间 20% 误差达标，不达标调换气次数）

5、送风风量的确定。

实际送风风量，取夏季负荷风量和最小换气次数的风量的较大值。实际送风量出来后，实际换气次数也就出来了。

备注：夏季送风温差 4℃ 是一个经验数据，我们这么多年算下来比较考虑的一个初始值。注意，算出来的夏季负荷风量要要永远比最小换气次数算出来的小，大的话也要把换气次数调大。

1『待确认：既然算出来的夏季负荷风量要要永远比最小换气次数算出来的小，那为啥 Excel 表里，算实际送风量要用 if 语句，直接取最小换气次数的风量不就行了。回复：有些明白了，Excel 里的最小换气次数只是个初始值 20 次，有可能有些房间的散热量比较，算出来的夏季负荷风量比较大，那么就得调大换气次数。原来自己的想法换个说法就正确了，「直接取调整后的换气次数的风量不就行了」。此时又引发一个疑惑，复核单个房间的时候，算出来的夏季负荷风量如果比最小换气次数小 20% 以上，咋调？换气次数又不能改小。』

送风量（计算输入参数：房间体积、最小换气次数、夏季负荷风量）

6、排风量和回风量的确定。

送风量有了。如果房间是防爆区的，全排，排风量等于送风量。

```
回风量 = 送风量 - 正压风量 - (压出风量 - 压入风量)
```

目前粗糙算法，压出风量 - 压入风量 = 0，只需要管正压风量即可。

有些房间，项目里要统一的（比如专业负责人定掉），比如清洗间、洗涤间，有粉尘要排的，工艺专业要专门提的。所以是否要全排的逻辑：防爆、专业负责人定的项目统一要排（暖通专业负责人）、工艺专业提的条件里要排，只要命中一个即全排。

对于非防爆区的排风，大部分情况下是百分百全排掉的。也有特殊情况，可能只排 50%，这就是要靠工艺条件或暖通专业负责人数据的输入了。

1『上面的信息跟之前做叶酸车间提暖通排风条件关联上了，非防爆区域的的房间，哪些要做排风的，需要在条件里单独提出来的。（2021-05-11）』

排了多少，剩下的就是回风量了。

回风量（计算输入参数：压入风量、压出风量、正压风量）

7、送风口的数量确定。

可以给一个数据，跟房间面积相关，比如 10 平方的房间，先默认一个。Excel 的风口编号即对应于风口的大小，一个编号一个尺寸风口，跟图纸上是对应上的。对所有房间，所有送风口的规格是一样的。400 风量之下的用 S-1 的送风口，400-800 风量之间的用 S-2。

送风口所有厂家是一样的，但回风口、排风口是跟厂家有关系的，目前做了 3-4 种规格的，以后可能会更多。

8、下面的计算书。

是算制冷量的，跟前面所有说计算过程的没关系的。输入数据是上面算出的送风量、排风量、回风量。

一个是数据库里气象参数数据、一个是室内的实际的需求，一个是室内和室外混合后的数据（根据新风比例，新风比例即上面 3 个风量得到的，送风减掉回风就新风）。算完混合数据即可得到焓值数据，那么就可以算出冷量。从风量算制冷量就差一个焓值，所以前面要算焓值。冷量出来后，水管多大的、冷冻系统多大的、设备多大的就有了。

最终要算的就两个数据，一个是风量一个是冷量，这两个数据就是公用工程量。冷量的数据会体现在 PID 里的，水管、阀门那块，还有一个设备表。

混合点算完后，我们是有个露点的，露点目前是给定的。再热一个量，再热就浪费了（如何理解？以后可以咨询下谢）。下面这个计算书要的是 4 个结果。

## 20210519与李奕峥交流泄爆和安全疏散

### 后续要求

1、砖墙和泄爆墙分层来画。

2、确认一下可以泄压的地方：泄压墙、轻质墙、窗户、门。扣掉：柱子宽度、普通砖墙、防火墙、防爆墙。

3、画几个封闭的区域，高度塞到属性里去。看看 PL 线的哪个属性可以塞。

4、为啥是去距离最大的 5 条疏散线画出来，这里的个数 5 是建筑专业规范要求的么？

### 泄压面积计算

有个泄压公式。

A = 10CV^$2/3$

A —— 泄压面积

V ——厂房容积

C —— 泄压表，详见《建规》的表 3.6.4，常规取 0.11（一般）和 0.25（氢气），取其他值的时候会特别注意。

首先要进行一个「长径比」判断，即「平面的最长边和横截面积周长的积 / 4 倍横截面积」。以 3.0 为分界。

如果小于等于 3.0，可以直接开始进行泄压面积的计算。如果大于 3.0，需要继续分割。常规情况的话会先考虑对半切。

算出来的「泄压面积」是我们所需要的泄压面积，实际的泄压面积要比这个大。

实际泄压面积的算法：建筑里，砖墙是单独画的，泄压墙比砖墙更「细」，目前我们是放在一个图层的。我们建筑的可以分层来画。哪些可以算泄压的呢？1）柱子的整个「面」不算，是实心的。2）泄压墙、轻质墙、窗户、门，算的。所有的长度加起来后，再乘以高度就获得了泄压面积。

现在回过头来看分割成 2 个区的计算方法：比如分成了 A 区、B 区，还是套上面的泄压公式来来算，算出来 2 个值，比如 a 和 b，只要 a+b 小于算出来的实际泄压面积即可。

自动分割算法：一跨一跨的来试着算，一跨一跨的移，循环的终止条件，割出来的两个区只要「长径比」同时小于 3.0 即退出循环。

基本割 2 个分区是可以满足：2 个长径比都小于 3.0 的。因为工艺布方案的时候，我们会提前打招呼，不要弄的「径深」特别大的才会分割成 3 个区。

层高要把梁扣掉。框防爆区域的时候直接把高度填到「框」的属性里去，看看 PL 线的哪个属性可以塞。

成果：建筑底部下面的「泄爆分区泄压面积计算」，包括图、轴线号、以及文字。

弄泄压面积对我们建筑来说很费时间的。

### 疏散距离自动计算

疏散距离常规来说分为工业和民用两种。工业的是到室内任意一点，民用的话是从疏散门开始算距离。

先说民用：是从疏散门开始算距离，但是，它从里面到疏散门也有个最远距离，它是分两段的。里面的，室内最远点离门的距离，它是有个要求的。然后，门到楼梯有个距离。加起来才是真正的疏散距离。

按矩形区域框考虑，先定位到「门」，看这个「门」在矩形的哪一条「边」上，那么室内最远距离势必在此「矩形」另外一条边的「角点」处。

改进算法：1）先把所有的门筛选出来。2）接着识别离楼梯那边的最近的一个「门」，几个楼梯几个「门」，此门为「疏散门」。接着看剔除掉「疏散门」剩余的那些门。3）现在要的是这些「普通门」到「疏散门」的「避开墙距离」。

两个门之前的直线，如果不与墙相交，那么满足条件。如果相交，那么定位到与之相交的「墙」。「墙」两端的「端点」，如果是水平方向的墙，取里离「疏散门」距离最近的端点，如果是垂直方向的墙，取离「普通门」距离最近的点。确定端点后，「画」端点到「疏散门」的「距离直线」，按上面同样的逻辑走。直到避开所有的「墙」。

改进的算法：

两个门之前的直线，如果不与墙相交，那么满足条件。如果相交，那么定位到与之相交的「墙」。墙」两端的「端点」，沿着墙延伸各「移」10 公分作为 2 个虚拟的点，这两个点跟起点「普通门」的连线，只要与墙相交的「个数」比上一次的少，那么此方向的「端点」即为想要的。

工业的是算到室内最远点。先把一楼对外的门筛出来，建筑画个外框，在外框上的门的即为「疏散门」。

常规自己人工的做法：感觉哪几个点可能是离这个门最远，那么先把这个距离标出来，可能有 4-5 个点。先找到点再把距离先标出来。

1、先把所有的房间识别出来。

2、每个房间里有个门的，房间里离房间这个门的最远距离是可以判断出来的。

比如有 4 个「疏散门」，那么最终要找 4 个离这 4 个疏散门最远的「点」。现在有 20 个房间，每个房间里有离本房间门最远的点，那么有 20 个点。最终要的 4 个点肯定是在这 20 个之中。一个房间一个房间的来看，房间里最远的点 A 找到了，A 到 4 个疏散口的距离分别量出来，取最近的那个疏散口（疏散距离肯定是走最近的），画出一个「虚拟的疏散路线」。第二个房间同理，画出第二条虚拟的疏散路线，同理最终可得到 20 条虚拟的疏散路线。20 条疏散线，取距离最大的 5 条疏散线，真实的画出来。

补充：建筑专业把疏散通道框选出来，简化绕障碍物的逻辑实现。

## 20210524赵总周效良交流危险工艺

那个项目的氢化反应比较经典的，拿出来做模板。12 种危险工艺做出来。

1、氢化。

氢化，有间歇和连续的。目前连续的不多。

氢化赵总整理资料。

周：工艺人员首先要把数据掌握，关注点不是怎么把图画出来。关注点是什么时候选哪个积木。氢化模块按最全的做，氢化还涉及到：取样、催化剂的加热和过滤、回流冷凝等。

2、氯化。

蒋万忠和楼佳明。氯化有反应釜的氯化和塔的氯化，先做反应釜的。

3、重氮化。

徐力。

4、硝化。

徐文斌。

5、氟化、聚合。

徐力。

6、烷基化。

可能会用到格氏反应的。

周：上面的几种危险工艺用的比较多，其他的危险工艺还不如一些经典的单元操作用的多。比如塔的；多功能的一个釜，配套的换热器回流的，计量槽，一个标准的配置。

对工艺人员的要求更高了，操作的参数要掌握。

跟赵总、周工上次碰头后确定的事项。1）确定了要做的危险工艺模块以及对接人：氢化（赵总）、氯化（楼佳明）、重氮化（徐力）、硝化（徐文斌）、氟化（徐力）、聚合（徐力）。2）确定了第一个要做的模块：氢化工艺。

上周熟悉了下之前公司业务建设的氢化工艺，下周催赵总把氢化整理后的资料发于我。

## 20210525与陈宝锋叶菁交流换热器工程图

### 基本信息

信息源自《NB/T 47023-2012》

1、管箱法兰类型。

甲型、乙型是平焊法兰，长颈型是对焊法兰。

甲型、乙型、长颈法兰的选型规则：腐蚀裕量、温度、最大允许工作压力。

甲型：公称压力为 0.25-1.6MPa、工作温度高于 -20℃-300℃ 的钢制压力容器甲型平焊法。

乙型：公称压力为 0.25-4.0MPa、工作温度高于 -20℃-350℃的钢制压力容器乙型平焊法兰。

2、法兰检测。

6.6.1.2 对长颈法兰，当工作压力大于或等于 0.8 倍本标准中规定的最大允许工作压力时，法兰与圆筒的对接焊缝必须进行 100% 的射线或超声检测，检测方法按 JB/T4730。射线检测，技术等级 AB 级，合格级别为 Ⅱ 级，超声检测，技术等级 B 级，合格级别为 I 级。

6.6.1.3 对甲型平焊法兰、乙型平焊法兰，法兰与圆筒或短节间的连接焊缝表面应进行 100% 磁粉或渗透检测，检测方法按 JB/T4730，检测结果 Ⅰ 级合格（铁磁性材料制法兰焊接接头表面检测应当优先采用磁粉检测）。

### 交流记录

1、箱管法兰。

箱管法兰，甲型、乙型、长颈型，主要是长度不一样。长颈型的有一个颈部的高度。

叶菁：大法兰是没有介质性质限定这一说的，比如甲乙类介质，管法兰那边必须选 WN 的，但箱体法兰这边没强制限制的，只要温度压力符合，选甲型乙类的也可以。不过我们常规自己做的时候是匹配的，管法兰那边是 WN 的，那么箱体也选 WN 的。

补充一下：箱体法兰有《NB/T 47023-2012》的，也有《HG/T 20592》的，比如小管箱（DN 300），其实就是管道做的。DN400 及以上的，用《NB/T 47023-2012》，DN400 以下的用《HG/T 20592》。

陈宝锋：默认与管法兰匹配，比如管法兰是 WN 的，那么箱体法兰默认选带颈的。

长颈型的有一个颈部的高度，HGCAD 画出来的是有颈部、颈部高度的，而且有「相关线」。我们自己的工程图把「相关线」省略掉了，所以你把那个颈部高度当作直边高度了。

2、拉杆。

最好有一个排管图。

叶：排出来，只是一个初排，要核算的，看面积够不够。

陈：拉杆要均布放的，DN25 的换热管，筒体直径是多少，定几根拉杆是有规定的。换热管 DN25 的必须要用 12 的拉杆，换热管长度是 1200 的，拉杆必须要有 10 根。（拉杆的数量可以做成自动算的逻辑，可修改）

比如定 6 根拉杆，均布的。拉杆工程图里只需要画 2 根即可，每根的终点位置在折流板处。最左边和最右边的各一根，东西向的定位是折流板的缺口中心的位置。

拉杆的作用是固定换热管的间距。

3、折流板。

折流板的数量，常规是工艺条件里定的。

折流板定位的基本逻辑：中间区域是均分的，还剩下多少后，再两端均分。要注意的：第一块折流板跟进口管的距离是有要求的。不能小于多少，太大也不好，不然会变成一个死区。

比如 6 个折流板，算上上下两端，按 7 个区间考虑。

拿到的初始数据是管子的长度，管子的露头长度减掉、再减掉一个箱管法兰（管板）厚度。获得里面净长度。

根据不同的焊接方式会有不同的露头长度，所以露头长度先按「输入」考虑。

折流板定位的逻辑：首先是均分，但上面靠近管板的均分和中间的均分是 2 个不同的场景。只能现有一个初始的默认值，最终的值是很难自动定的，考虑的因素很多。根据管口的大小、工艺管口的位置、直流进去的方式（加放冲、不加放冲的）。所以基本思路先默认均分，然后人工调。调 2 个参数：1）上部折流板与管板的距离（或下部折流板与管板的距离）。2）中间折流板的间距。总共是 3 个数据。还有一个方案是根据工艺的间距要求来定。

生成的是折流板的逻辑和调整折流板的逻辑分开来做。

4、折流板的缺口。

工艺可能会提出来，比如切 25%、30%。根据工艺的数据切是比较简单的。

如果 25%，刚好切到一半的话，直接用 25%，如果切的不合适，我们设备的自己微调。最后如果能生成布管图后，那么可以直接在布管图上量，合不合适。

5、检测数据。

除了之前常规的射线检测。管板、接头。碳钢的都是要做磁粉、不锈钢的要做渗透，这是特殊要求，默认都是 100%。

参考规范《JB/T 4730.1-6》

6、筒节。

有可能有，有可能没有，没有的话高度默认为 0。位置在管箱法兰和封头之间。不带颈的，它一般是直接焊在管箱法兰上的。一般是要设的场景：1）工艺管口放的位置不够了。2）气量的距离，算出来不够了，流进去太快了，加个筒节缓冲一下。

7、换热管示意。

只需要画一根。定位：中心线位置往左偏移一些（最好偏移到中心线和拉杆的中间）。

8、塔器相关信息。

塔器的类型太多，直的、斜的、填料的、板式的。先做反应釜模块。

目前没有项目在用。高洋洋那边目前都是在做大罐的，用不到。

9、法兰型式。

管板侧的法兰是跟另外一侧的管箱法兰相配的。比如管板是凸面 M 的，那么管箱法兰就是凹面的 FM。有个主意点：对换热器，如果选用凹凸面的法兰，管板法兰肯定是凸面的 M，不管它在上面还是下面吗，因为管板法兰是做出来凹面的。

换热器的管板不会用到榫槽面的法兰。要么是常规的突面 RF，要么是凹凸面（FM/M）。

管口的法兰是凹面还是凸面，需要看朝向的。

凸台。法兰上面凸出来的那一小块叫凸台。