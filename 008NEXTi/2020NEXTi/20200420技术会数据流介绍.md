# 数据流介绍

# 技术大会汇报

## P1——数据流一体化简介

今天我想要达到的目的有 3 个：1）跟大家介绍下我们现在开展的数据流一体化是做什么的。2）大家可以看到手里的这张调查表，我想收集一些信息。3）趁领导在，我想要在各专业里确定一个后续跟我对接的人，暖通反正是谢雨东，因为数据流一体化的工作是他提议的。

## P2——数据流一体化构建方法

我先说下基本概念。简单说是把项目里的数据都放到一个后台数据库里，设计人员在提某个专业的条件、做某个计算或者做某个成品图纸的时候，可以直接从后端调相关数据，这里面包括上游专业提供的数据、一些公用数据还有如何处理这些数据的固定算法，总之，尽可能的减少设计人员自己输数据，把固定的、可复用的数据处理全交给机器来做，最终目标是实现数据的输入、处理和输出一体化。

实施办法一个是以各专业为中心，一个专业一个专业来。第二个是以专业里某个具体任务为抓手，比如提某个专业的条件、做某个计算、做设备表之类的，一个任务一个任务的打通。先以暖通专业为试点，先做洁净空调和通风计算。

其实之前各个专业都有人想过，但谢雨东做了计划规划，而这块工作的技术实现是我来负责，比如数据库的构建、处理算法的实现以及网页端的的交互。

## P3——暖通全面通风计算

我说个具体的例子大家就清楚了。这张暖通全面通风计算的逻辑框架是我跟谢雨东商量后初步定下来的。我们简单的走一下，这里设计人员的交互界面，除了第一步是在 CAD 里，其余同时在网页 web 端。

前 2 步是上游专业干的，这里是工艺专业。第一步在 CAD 里提条件，要提哪些信息我们在块里规定好。接着从 CAD 里把条件信息抽取出来，在网页端里加载下，这里有个确认环节，条件数据会在网页端呈现出来，确认没问题后提交到后端数据库。第 3 步，暖通专业从网页端按房间提取数据，输入一些缺失的数据，存入数据库计算。最终要得到 2 个东西，一个是单个房间的通过量，一个是多个房间的系统风量。

大家可以看到，这里涉及的有4 大类数据，一个是上游专业在 CAD 端的输入数据、一个是本专业需要在网页端的输入数据，我们是想尽可能的减少这个界面的输入，另外两个是数据库里已有的。

有人可能会问，这与与现在 D4 里的提的条件有啥区别。D4 上提条件是从从管理、管控的角度看的。我们做的是从生产端看的，是想提高提高效率、提高质量。而且不会造成额外的工作，输出的条件表之列的可以直接上传到 D4 里。我的理解最关键在于数据的利用。1）范围上来看，用的范围更大，这里的「公共数据」，不同项目甚至不同专业间的公共数据都可复用。2）固化的东西可以交给机器做，而且可以在后端设控制逻辑，效率和质量都可以提高。1）数据颗粒度小很多，以前提的条件可能就一个文件，比如 CAD 图纸、excel表、word，现在的数据时一个个结构化的字段，对应着属性值。

## P4——清单调查表

最后这个调查表要麻烦大家帮我填下，你觉得自己专业里有哪些任务，放到数据流一体化里最有价值，我们可以点点先做。比如提条件、计算书等。其他专业我不太清楚，工艺这边我自己有几个是想做的：1）设备表自动化，这块我其实已经在自己的电脑上实现了，就缺部署到 web 端的实现，以及数据库的填充。2）专篇里的危化品物性的表，这个是上次师父你跟我提的，其实我也知道具体的技术实施路径。还有专篇里的设备表自动生成。3）第三个是仪表条件。仪表位号、物性数据。

最后，大家还有什么疑问，或者建议都可以随便提。

接着分享下我计划构建数据库的方法论，大家如果有更好的建议尽管提。核心的内容有 2 个。

1）以专业为中心一个一个来建库。比如这个专业有哪些输入数据和输出数据，数据划分为两类，一是公共可复用的数据（比如物性数据、设备相关数据、规范里固定的规则等等）。二是专业数据（比如上下游各专业的条件）。先以暖通为试点，因为有谢工那边的配合。

2）以各专业在某个项目里具体的任务为抓手。我是打算自下而上的来，比如提某个下游专业的条件、做某个计算书，一个任务做一张数据库表单，收集好传到总数据库。计划先做洁净空调及通风数据两个模块，谢工答应 4 月 20 日前将洁净空调及通风计算的「专业数据」整理完毕提供给我，昨天给了一部分。

而这 2 块计算涉及到的公用数据我也在收集：1）物性数据，建议增加「接触限值」——依据「GBZ2.1-2019 工作场所有害因素职业接触限值第一部分：化学有害因素」及 HG/T20698-2009 的附录B.3「车间空气中有害物允许浓度」。建议增加排风浓度限值——依据「工业企业设计卫生标准GBZ1」「环境空气质量标准GB3095」「大气污染物综合排放标准」GB16297。2）室外气象参数库——依据「工业建筑供暖通风与空气调节设计规范GB50019」的附录A。3）国家危险废物名录——依据“2016版《国家危险废物名录》”（注意一下，2019年版的应该快执行了）。4）公用工程的物性数据库——水、饱和蒸汽、过热蒸汽、乙二醇溶液、氯化钙溶液、导热油。

危化品物性数据、公用工程的物性数据、室外气象数据、国家危废物目录。
