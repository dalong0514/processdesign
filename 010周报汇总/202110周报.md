## 3 月第 2 周

第 10 周，2021 年还剩 43 周

1、自动迁移建筑底图并更新（1/1）。

总结：目前是靠下游专业自己用该功能迁移建筑图纸，只做到节省时间，无法保证下游专业用的是同一个「数据源」（建筑底图）。问题：开发该功能的时候，发现如果要实现下游专业提取的是同一个「数据源」（建筑底图），那么必须保证建筑专业的设计人员画的「规范」，下游专业拿到建筑图纸后直接用该功能提取。但往往建筑图纸提取出来的底图要少量核对修饰。解决方案：根子在建筑设计人员上，可以尝试以设计流团队为试点，拉一两个建筑专业的人到年初成立的设计流团队，团队里的建筑人员我们约定好「规范」画图，下游所有专业直接提取底图。

2、流程图数据迁移到布置图并生成对应的平面设备模块（2/3）。

总结：做这个功能的时候，我们意识到流程的数据是一种「数据源」，那么这个数据源也可以是外部的文件，我们做项目往往先拿到业主的设备资料，可以先对业主的数据简单处理成 excel，在流程图（或布置图）里通过这个 excel 自动生成设备位号和设备图块。这两个功能在前期画流程、排方案，可以省很多时间。而且此技术也是「方框图生成 PID」实现的基础技术。

3、设备型号匹配更多设备数据（1/4）。

总结：把常用的设备数据放到一个公共库里，用一个型号（代号）去匹配，极大减少设备数据的输入。1）跟开发人员、设计人员讨论已经确定的数据库「表」的逻辑关系。2）此功能制剂组最先提出，以制剂的设备为试点。目前已经收集到制剂常用的设备数据。3）预计 3 月底开发完该功能，而且此功能是「基础性」技术，可推广其他专业。

4、方框图自动生成 PID 输入界面探索（1/5）。

总结：「方框图生成 PID」的实现目前有个难点：如何收集到各个「积木」间的关系。需要一个可以快速画「方框图」以及输入基础数据的界面。与开发人员交流后，目前有 2 个方案：1）页面端使用开源框架 Canvas 来实现该技术。2）方框图界面也是放在 CAD 里面。方案 1 需要的是一项全新技术，得花时间学，成本高。个人目前倾向于方案 2，准备用方案 2 试试，如果 3 月底前无法跑通流程就换方案 1。

5、设计流暖通专题会。

总结：谢雨东牵头我们成立了设计流数据一体化暖通专项组（共 10 人）。1）我跟谢雨东向组内成员做了数据流的宣贯。2）各个组员对数据、设备、流程均提了自己的一些想法；对目前可较大提升工作效率的点提出了诉求；对数据精准性提出一些顾虑、建议及想法。3）敲定今后每周一晚上 6 点在 5 楼会议室开个碰头讨论会。下周一讨论会将进行具体的工作安排。

想法：

仪表专业的问题。

## 下周计划

1、流程图数据迁移到布置图并生成对应的平面设备模块（2/3）。

2、excel 设备数据直接生成流程图设备位号及图形，或直接生成设备图设备位号及图形（1/2）。

3、温度计选型逻辑图整理并转为代码。

4、设备数据匹配（2/4）。

5、发布新版设计流数一体化 V2.0并整理文档说明。

6、暖通专题会。

宣贯会准备

暖通要把仪表专业拿回来做，想做暖通的仪表选型、IO 逻辑图，为突破口。

## 设计流各专业功能需求汇总

2021-03-13

常规任务。

工艺专业：

1、流程中设备数据与布置图设备同步模块。（属性：所在区域）自动套建筑底图。

2、设备参数模块化减少输入。定型设备通过型号匹配数据，非标设备通过代号匹配数据。

3、流程图通用模块自动生成。

4、阀门、管件数据结构化模块（统计材料）。

5、自动生成非标设备条件模块。

6、工艺计算书模块。

仪表专业：

1、仪表自动选型模块。

2、仪表统计材料模块。

电气专业：

1、提取工艺设备电机位置到天正电气；其余待定。

暖通专业：

1、基于节能及自控的智能 PID 集成。（把后端的设备选型都要去上去了）

2、洁净空调模块。

3、局部通风模块。

给排水专业：

1、给排水计算书模块。

2、化工品储罐泡沫灭火计算设计模块。

外管专业：

1、管道数据表。

2、系统图的管道标注。

3、管架荷载计算模块（生成成品计算书）。根据管架剖面图形成管架荷载的计算书，附件是一张管架剖面图。

4、管廊支吊架自动选型。

设备专业：

1、储罐底板自动排版。

挑战任务：通过方框图自动生成PID，先做罐区和空压站。

方框图的界面用 CAD 实现。

1、含有多段线的块作为模块的输入。一根管上多个属性对应于多个物料，进设备前合并的这种；如果 2 个管道分别从 2 不同的口子进设备，那就画 2 根管道块。

2、画入口管道块的时候，先点一下核心模块获取并绑定其 ID 然后自动生成该进口管道块，同理出口管道块、冷凝模块、接受模块。

3、插入 excel 对象作为主体信息框。OLE 对象。