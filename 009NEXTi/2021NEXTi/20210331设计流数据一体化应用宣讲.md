## 设计流数据一体化应用宣讲

主题：设计流数据一体化应用宣讲（工艺专场）

时间：3.31 日（下周三）

整个使用的流程顺序

理性情况：先设备，设备为核心

宣贯内容：

1、简介。

2、软件安装注意事项。

3、工艺流程图相关使用说明。

4、成品图表导出相关说明。

5、工艺布置图相关使用说明。

6、技巧汇总。

P1 ——

今天我这边要讲的主要是下面六块内容。

P2 ——

首先我说下设计流的基本思路。我们先通过块把数据打包结构化，主要是管道数据、仪表数据和设备数据。结构化之后就可以做很多事情了，比如大批量的修改 CAD 里的数据；比如管道根据物料代号自己先分类再根据坐标位置编号；比如一般根据流程图图号或者所在设备位号来自动编号，等等。然后把 CAD 的数据导成一个临时文件上传到内网，要么生成成品图纸要么生成下游专业的条件。

P3-4 ——

设计流有 2 个底层的技术储备。一个实现了 CAD 数据和 excel 的双向传输。这个好处有两个，首先我把 CAD 里的数据全部导出来后，大批量修改输入数据在 excel 快很多的，execl 的筛选替换啥的功能都可以用。

第二技术储备是可以自动生成 CAD 里的图形数据。这个技术的应用场景特别多，比如这几张动图里：1）根据主流程里的管道数据自动生成辅助流程的组件，同时做了数据绑定，主流程的管道数据更改了，这里的数据也会更新。2）跨流程图的接图箭头生成。3）下面一排设备位号的生成。还有一些其他相关功能，比如……。

用数据流比较多的人应该会发现：之前我们开发的绝大多数功能是基于这两大基础技术的。

P5 —— 安装

接下来我们看具体的使用。在座的有哪些人手里用的是 V2.0 版本的（3.20日发布的）。

开讲之前我声明一下：有些人使用的比我多，我今天分享的一些技巧其实有一些是设计人员跟我说的，我自己都没想到还能这样操作。所以呢，等下我讲到的任何一个功能，你有更好的实现方法的话，请随时打断我。我也想趁着今天的这个机会多收集一下我不知道的技巧，到时更新进说明文档里。

我们先说软件的安装，注意事项有下面几个：Chrome 浏览器、设计流文件的路径、菜单的加载（工具栏）、插件的加载。

Chrome 浏览器：网址；初始密码；说明文档。

设计流文件的路径：不能嵌套。

菜单的加载（工具栏）、插件的加载：壳与真正的命令。

P7 —— 流程图，自动生成相关

下面进入主要环节，流程部分，去年做的基本所有功能都是围绕流程图的。

P8 —— 流程图，修改数据相关

P9 —— 流程图，可以不填的数据

1、仪表所在位置匹配数据。

2、仪表控制点名称。

P10 —— 流程图，导出成品图表

P11 —— 布置图，设备数据流程图迁移至布置图并同步

P12 —— 布置图，洁净空调条件；建筑图纸迁移并更新。

注意事项：

1、仪表一个块一个表。远传表常规都是 LP，控制室不显示的（如液位音叉）是 P，现场待就地显示的（LED液晶）远传表也是 LP，备注里注明。其实是否带液晶显示，仪表专业会跟业主确认的。

1、管道尽量不要镜像。

1、建议编号要有规则，有规则你后续对这些数据可以先筛选再批量修改（Excel 或者 CAD 里）。

1、仪表自动编号用的时候，初始编号不能为空。否则转圈。

1、编号有小数。标注里，主单位里，消零面板勾选「后续」。

1、导出的 excel 里属性错位。不要用英文逗号，已经存在了英文逗号的话，find 命令批量替换为中文逗号。

1、管道块同步后，无法使用自动更新接图箭头以及自动更新辅助流程组件。

1、用配套的材料等级表。

1、电机级数 2/4/6/8，填 1 为变频电机。

1、设计流的命令也映射成自己的命令。有些人是命令党，其实你可以把设计流的命令也映射成自己的命令。进 cuix 里看具体的命令名称。

1、保密室的目前折中方案：把临时文件拷到Excel表里。

1、刷辅助管道的设备端方法。

1、注意看命令栏底部的提示信息。

1、通配符的使用。

开放的项目，只要是好的需求，提前开放。

1、所有涉及编号的东西你画流程的时候可以先不管，画完提条件的时候统一编。（针对仪表按设备位号变会累积的原因）

1、导数据的时候输入一下项目号和单体号，下游专业用、其他专业也需要用。我也不想把人和项目绑定，你麻烦我也麻烦。

1、安全专篇的设备表、仪表控制点（暂时不讲，应该是仪表专业的工作）。

开放的，参与进来，自己的需求被实现，没有比这个更熟悉功能快的。

把要演示的数据先改好，仪表空值的例子