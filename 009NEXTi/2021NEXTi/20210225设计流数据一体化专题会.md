## 设计流数据一体化专题会

P0——

大家早上好。今天年初的时候我自己做了一个 2021 年的设计流数据一体化行动计划，这两天开会的时候孔总跟我说，在座的各位有很多在自己的年度计划里有设计流的相关内容。那么索性咋们开个专题会，大家一起交流一下，因为有很多东西是相通的，大家可以互相启发。昨天我也找了一些人聊了聊，比如夏老板、华雷、谢雨东、沈琦、徐骋，我发现大家很多地方想到一起去了。所以有了今天这个专题会。

开始之前我得先感谢一下在做的各位，从去年谢雨东提出设计流一体化的概念到我们开始做，在做的各位给设计流的支持是最大的，开始的时候真没啥东西，我们也不知道会做成啥样，好在从 0 到 1 最难啃的骨头啃了。

感谢大家！

主要内容有三个。首先是工艺专业设计流里已经完成的模块，给其他专业看下我们工艺目前做到了什么程度，目前所具备的技术储备。我感觉有些东西是可以直接借用工艺的相关模块，同时给大家扩展一下思路，看看能不能联想到有些之前没想到的功能。

第二块是重点，我会先把我之前做的计划以及昨天跟一些人交流的信息整合进来，先整体介绍一下，大家可以随时补充，我希望通过这次专题会大家一起把要做的模块一起敲定下来。最后我们做一点仪式感的事情，今年设计流的工作涉及到各个专业，趁着这次机会，我们把设计流数据一体化团队的成立仪式举行掉。

P1 ——

我们先看第一部分。首先我说下工艺时候模块的基本思路。我们先通过块把数据打包结构化，主要是管道数据、仪表数据和设备数据。结构化之后就可以做很多事情了，比如大批量的修改 CAD 里的数据；比如管道根据物料代号自己先分类再根据坐标位置编号；比如一般根据流程图图号或者所在设备位号来自动编号，等等。

然后把 CAD 的数据导成一个临时文件上传到内网，要么生成成品图纸要么生成下游专业的条件。

P2 ——

去年工艺这边，我个人认为有两个大的技术性突破。首先一个实现了 CAD 数据和 excel 的双向传输。

这个好处有两个，首先我把 CAD 里的数据全部导出来后，大批量修改输入数据在 excel 快很多的，execl 的筛选替换啥的功能都可以用。

第二个好处，还是超人提醒我的，导出 Excel 相当于把数据剥离出来了，我完全可以让几个协助人员同时做一个单体的数据修改，比如第一个人只弄设备的数据、第二个人弄管道仪表相关的，隔个两三天大家一起把数据反写回同一个 CAD 同步一下。

P3 ——

第二个阶段性的突破是我们可以全面结构化的数据甚至外部的数据，自动生成 CAD 里的图形。这个技术的应用场景特别多，包括去年实现了的，包括今年大家计划要实现的模块都是基于这个技术的。

比如这几张动图里：1）根据主流程里的管道数据自动生成辅助流程的组件，同时做了数据绑定，主流程的管道数据更改了，这里的数据也会更新。2）跨流程图的接图箭头生成。3）下面一排设备位号的生成。

还有一些其他相关功能，比如……。

P4 ——

下面是第二大部分重点内容，各专业今年要实现的功能模块。

我们先看一个最开始的基本框架。我们现在在做的是把原来各专业之间互相传数据的模式，改成，各个专业的数据只跟这个项目数据库交互，一个项目里大家共用的数据只要传一次就好，要用就直接从这个库里掉。不要这个专业输过一次，下个专业用的时候还得再输一次。

其实这里面有两种场景。一个是目前没有天正系列软件的，比如工艺专业、外管专业，我们先要自己把数据结构化做一些单项性的功能。第二个是做跨专业的应用。

而那些已经买了天正系列软件的，比如给排水、电气、暖通，单一性的功能能想到的那些软件基本都开发了，我们着重做跨专业的应用。

P5 ——

我们先说工艺的。

模块一：流程图设备数据同步的设备布置。去年工艺的应用全部是基于流程，扩展到布置后应用的场景又会多很多。而且有些跨专业的应用是基于布置图的。比如去年我跟叶赟聊的设备电机位置的提取，这个模块完成后提取电机位置也就水到渠成了。

模块二：流程图通用模块自动生成。这个模块能衍生的东西最多，各专业同时想到的人也最多。

既然能自动生成图形，那边通用型的东西都可以组装起来，一起自动生成。比如图里，甲乙类储罐的配置、反应釜配套公用工程的配置，甚至整个大块组装成模块自动生成重用。这里不仅是流程图，布置图里做到最后就可以实现，上次宰老师未来工厂想的那种蛋糕的拼接。

这里额外提一下，我和其他人想到都是把通用的模块组装自动生成，昨天徐骋跟我聊，他想的更颠覆，甚至连 CAD 的这个界面都能干掉，等下他可以把他的想法给大家分享一下。

模块三：阀门、管件结构化，统计材料用的。之前只是做了仪表管道设备。

模块四：设备参数模块化减少输入。定型设备通过型号匹配，非标设备通过代号匹配。

模块五：计算书模块设计流里。这是陈杰提的吧，如果放到设计流里，我个人建议就嵌入到流程图里做掉。我以简单的泵扬程计算为例，它的输入数据有一部分是可以直接从流程图里读取的，比如出口的管径、出口管线上阀门管件的数量，另外一些需要输的数据再加个界面。数据输完了导成临时文件去网页里导出成品计算书。

邮件名：设计流数据一体化 2021 年专题会暨设计流项目团队成立

靳淳、陈杰、曾涵卫、叶旭峰、徐骋、宗源、郑飞宏、牟苏嫣、陈康麟；华雷、蔡翠平、屠立峰；谢雨东、林峰；叶赟、孙亮；夏晓寒、孙晨；郑重、沈琦；叶箐。

抄送：孔、赵、陈晋芳

各位：

明天（2.25 号）早上 9.30 在 5 楼文化区召开「设计流数据一体化 2021 年专题会暨设计流项目团队成立」。无法参与的人员请提前告知于我。

本次会议的议程如下：

1、介绍 2020 年工艺专业设计流完成的模块及目前所拥有的技术储备。

2、征集各专业 2021 年设计流功能模块（重点）。

3、设计流项目团队成立仪式。

下面是我 2021 年设计流行动计划暂定的各专业功能模块，供大家参考。

工艺：

1、流程中设备数据与布置图设备同步模块。—— 已完成

2、流程图通用模块自动生成。

3、阀门、管件数据结构化模块（统计材料）。

4、设备参数模块化减少输入。定型设备通过型号匹配数据，非标设备通过代号匹配数据。

5、自动生成非标设备条件模块。

6、工艺计算书模块。

仪表：

1、仪表自动选型模块。

2、自动出仪表安装材料。

电气：

1、提取工艺设备电机位置到天正电气；其余待定。

暖通：

1、基于节能及自控的智能 PID 集成。（把后端的设备选型都要去上去了）

2、自动生成设备一览表。—— 已完成

3、洁净空调模块。

4、局部通风模块。

给排水：

1、车间污水池模块。

2、给排水计算书模块。

3、化工品储罐泡沫灭火计算设计模块。

外管：

1、管道数据表。

2、系统图的管道标注。

3、管架荷载计算模块（生成成品计算书）。根据管架剖面图形成管架荷载的计算书，附件是一张管架剖面图。

4、管廊支吊架自动选型。

5、管道系统图模块。绘制管道系统图，定义各管线的特性，抽取管道数据表，供公司原有管段统计软件。

6、管道起始点自动核对模块。在管道系统图的基础上，定义管道系统图各管线起始点各专业的管线号，对各专业条件是否匹配进行判断并报错。

设备：

1、自动出工程图。

2、储罐底板自动排版。

会后明确的事项：1）明确完所有功能。2）进度安排。3）具体的对接人。