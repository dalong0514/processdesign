## 20220311与王大汇报数智设计年度指标

### 指标提炼

开发指标：开发全专业 159 项功能点。

补充：1）分解到每个专业的功能点。2）把散装的功能点都开发完，明年就是要去做协同了。

工艺：71 项。

设备：设备工程图，约 6 项功能。

外管：16 项。

给排水：22 项。

暖通：12项。

仪表：11 项。

电气：8 项。平面布置图（清理建筑底图、复制各专业的设备布置图、标注电机功率，布置电缆桥架，布置电机操作柱，敷设电缆线外加标注，提取电缆长度）；系统图（电缆材料表）。

结构：10 项。图库管理系统、外管架（平面图、横剖图、纵剖图）、排水池施工图。

建筑：1 项。图库管理系统：节点详图、构造表、装修表、门窗表等。

总图：2 项。罐区设备一览表。图库管理系统：路基结构 9 种，路面结构 6 种。

其他专业汇总共计 82 项。

应用推广指标 1：已经上线的功能在实际项目中全部应用。

补充：CAD 的功能，每次调用命令，后台自动收集信息传到服务器，信息包含：该功能名称、图纸里的项目单体信息、使用时间。确保每一项已经发布的功能，在该数据库里都有存储记录。

应用推广指标 2：各专业内典型功能点的覆盖率 80% 以上。

典型功能，10 个人，10 个人在用覆盖 100%，8 个人用覆盖 80%。

工艺：工艺流程图绘制 100% 覆盖。

设备：设备工程图 100% 覆盖。

仪表：仪表选型 80% 覆盖。

暖通：净化空调 80% 覆盖。

给排水：屋面雨水系统 80% 覆盖。

结构：图库管理系统 80% 覆盖。

建筑：图库管理系统 80% 覆盖。

电气：平面布置功能点 80% 覆盖。

总图：罐区设备一览表 80% 覆盖。

应用推广指标 3：各专业设计人员使用功能点占本专业所有功能点比例。（待确定）

回复：指标 3 取消。（2022-03-17）

### 记录

王大：

新疆国泰的总工程师，很爱软件，Aspen、Hysys 等等很熟很熟，没上过大学，那时学的是 XX（函数），后来当工人的时候学的是电气，现在是变成新疆国泰这么一个公司的技术总工程师，负责 BDO 这种大的工艺包的，对软件输得一塌糊涂，塔器啊。

相当于一台设备，每个人的性能参数都不一样，比如一台泵的扬程有多少、马力有多少。

孔：

对万总提出的这个要求还是挺难去评价的，他说要应用的好，要全专业，是不是每个专业都在用，这个我采取什么措施。还有，专业之间的协同，后面还是有很大的一个难度的。

1『措施是每个人在 CAD 端用我的命令时，post 命令名、项目信息、时间到客户端，这样就知道每个专业是否都在用、以及使用到什么程度。（2022-03-16）』

王大：

是的，一个是用，一个是用多少的问题。你这里 50 个人，我用一天也是用，用一个动作也是用，全部在用也是用。

孔：

其他专业的，我们最近又招了一个人，那么之前定的其他专业的进度可以往前推一步了，工艺加其他专业总共的 140 项功能点全做完。开发完之后，怎么要求设计人员用，怎么跟专业之间互相协同的用，实际上还是一个很大的问题。

裘：

一个是在不在用，一个是好不好用，用过之后效果怎么样。

孔：

公司要求的是总体性的、系统性的，大龙介绍的还是停留在散点，没有给他串起来。

王大：

老板的意思么，人家都在用弄了，我们要敢在前面，赶在前面才值钱。

分几个层级来看。

一个是这个专业有没有用，在用了就是在用了，这是一个指标，专业的使用率。还有用的东西占工作量的比重大概是多少。

1『指标 1：专业的使用率。该专业有没有在用已经开发好的功能。』

孔：

对流程图来说，之前跟赵志明也说了，我们单元强制，但实际上，赵总审图的情况也不完全的。

王大：

你们是个设备想法。

孔：

吴总之前提出来，对设备工程图（比较独立的），出图量里 75% 要用数智设计出，后来叶菁他们说只要用 100% 使用。

王大：

要么指标还是按专业定：比如设备还是工程图。

孔：

总共是 180 项功能，40 项工艺的已经开发完了，还剩 140 项。本来是想今年开发 70 项的，还剩 70 项放明年。后来王总要求要加快，又新招了个人，努力一下还是可以完成的。

1『指标：开发全专业 140 项功能点。把散装的功能点都开发完，明年就是要去做协同了。』

但是老板又要说，今年要看到协同的东西。

按照目前我们软件设计的逻辑，理想状态是业主输入，往前端走，我们把端口放开给业主，业主就会输入信息，如果输进来的数据不改，我们就按他的这个逻辑一样样确认完了自动出图。现实往往不会这么理想，现在是倒过来了，流程没有，布置先排一版给我，他完全把你的逻辑打破了。

还有，有些人利用这套工具导了一版初稿后，他在导的文件里自己改，不导回去了，改的时候这些数据也没有结构化。

王大：

一步一步来。工艺的流程是可以普及开的，暖通、给排水的逻辑也可以按这套逻辑走。

那时候在省府路的时候我就想把图例统一掉，弄了几个专业后弄不下去了，他们会拿出一大堆理由，整个专业来抵制。

孔总：

现在大家还停留在的阶段，只管自己，数智设计要为自己服务。

王大：

还是你们先出一个初版的指标。

一个是开发指标，今年要完成多少。明年基本上要完成什么，2 年说下。

一个是应用推广指标，分下专业。

孔总：

不考虑协调，上面的 2 个指标是可以的。

王大：

协同是可以分阶段的，明年开始什么协同，或者是哪一部分的协同，局部的协同。

孔总：

打个比方，设备的工程图，重量计算模块，设备专业用了后效率提升，但这个提升不会具体体现在项目的效率上。仪表那边也是，都是散点功能。

老板确实管理有方，他这么一弄，我们最近又进了一个人，以防万一，我们还会进一个人，第二个人再进来，四季度我们看看能不能就开始做协调的事情了。

王大：

之前单月人均的数据吓死人，月人均 40 多张。

90年代的时候就可以先排布置了，我做的时候经验是这样的，你到工厂里去先了解生产工艺，了解完之后，白天了解完了，晚上就回来排设备布置，然后第二天讨论布置（核对）。生产流程业主都告诉你了，一步一步怎么做的，投料是怎么弄的，整个过程、生产工艺你已经了解了，投料量、规模量也已经了解了，这个时候你就可以去计算设备了。第一步需要什么样的设备，规格应该是多少。

那时候流程图，急的时候所有条件都提完后，才开始画流程，包括仪表条件。特别是可研的时候，你就要考虑，按照它的过程过去，这个时候你要用到什么。基本路径：设备方案弄好了，开始提各个专业的条件，各专业条件提完后才开始画流程。那个时候有个好处是业主修改的少。

先画流程再布置的话，跟不上项目的进度的，有的流程还没画出来，有些车间都已经打桩了。除了仪表条件没流程提起来吃力，其他条件都好提的。可研阶段仪表条件不用那么精细，查一两个仪表没关系的。

裘：

总要是精细化工（间歇反应）对流程要求没那么严，设备大一点、管道大一点都无所谓的。间歇的，就是匹配程度要求没那么高，管子小了，我时间长一点就行了，能量散热弄的偏小，我多散下热就行了。

## 20220318与孔总交流跟王大汇报的工作要点

发王大、周光，抄送孔、裘。

加个帽子：数智设计 2022 年度工作绩效考核指标。设两类指标，一类是开发指标，一类是应用指标。

做一个表格。开发指标一个，每个专业分类。应用指标两个。第一个：所有开发完成的功能确保有设计人员使用。第二个：各个专业典型功能点确保 100% 的设计人员使用。

每个专业功能带你只的是什么。设备工程图具体写哪几个模块（储罐、换热器、反应釜）。

有没有一种描述：工艺 71 项开发完，它是达到了一种什么样的效果。比如工艺工艺流程、设备布置、二维配管三条作业线完成后，工艺人员能不能一键出图。比如设备工程图完成以后，是不是涵盖了它所有的工程图，是不是设备工程图所有工作已经完成了，设备的 6 项功能完成后，设备哪几类的工程图是可以了，要写清楚。外管 16 项是可以达到什么样的结果。

终稿：

附件是数智设计2022年度工作绩效考核指标，分为开发指标和应用指标。

开发指标：开发全专业 159 项功能点。

应用指标1：所有开发完成的功能确保有设计人员在使用。

应用指标2：专业内典型功能确保 100% 的设计人员使用。

附件里补充了开发指标完成后要达到的效果以及应用指标里各专业典型功能。

开发完成后要达到的效果：

工艺设计人员通过工艺设计作业线软件（工艺流程作业线、设备布置作业线和二维配管作业线）完成专业内所有成品图纸和中间条件文件。

设备设计人员通过设备工程图标准化设计软件自动生成储罐、换热器、反应釜三大类设备的工程图纸。

外管设计人员通过数智设计外管设计作业线软件完成专业内所有成品图纸和中间条件文件。

给排水设计人员通过给排水设计作业线软件完成罐区、排水构筑物、给排水系统图相关的成品图纸和中间条件文件。

暖通设计人员通过暖通设计作业线软件完成净化车间内空调计算、设备选型、流程图、设备布置相关的成品图纸和中间条件文件。

仪表设计人员通过仪表设计作业线软件完成仪表选型相关的表格类成品图纸。

电气设计人员通过电气设计作业线软件完成除天正电气软件外的与平面布置相关的成品图纸。

结构设计人员通过数智设计软件完成外管架相关的成品图纸以及实现专业内标准图集图库的统一管理和调用。

建筑设计人员通过数智设计软件完成专业内标准图集图库的统一管理和调用。

总图设计人员通过数智设计软件自动生成总平内的罐区设备一览表以及实现专业内标准图集图库的统一管理和调用。

## 20220302与外管专业交流

### 提炼汇总

1、面板需要输入的信息：1）管道的顺序，自上而下对应于自左往右，在面板里拖拽调整。2）管道净距。3）放在哪一层。

1『外加上后面说到的管架号信息。』

模拟场景：1）系统图里把所有的管道数据导出来。2）面板读出所有的管道数据，放到面板右侧，默认都弄个管架组件。左侧面板里分割成 4 个层窗口。可以把右侧管道拖拽到左侧窗口面板里。

1、管道默认的间距按净距 100 考虑，并且保留可以手动修改间距。

1、生成的管道尺寸按外径，我们之前是公称直径。

1、管道的重量直接按天书里的数据。

1、直接在剖面图的图纸里生成管架一览表。10 个剖面直接生成 10 个汇总的管架表。开始的时候没管道安装图，我们是单独画剖面图的，所有的剖面图单独在一个 CAD 文件里的。

可以在调用生成管架表功能的时候，后台自动抓取最新的管架数据存到服务器。

1、拿三维的数据，接到我们目前做的这套系统里，来生成剖面图。

1、剖面图带计算书的，不要用我那个 Excel 表的模板了。一个剖面图，旁边就一个计算书的表，这样很清晰的。左边一个断面，右边一个荷载表。我都觉得我不需要再给结构提其他条件了。

更改：荷载数据直接在剖面图上表示出来即可，结构要什么就给他生成什么。

1、条件版的关键一览表增加一列，固定点，我们自己填写。

### 交流记录

郑重：管道的间距一般是净距 100。法兰、管道 U 型螺栓、U 型夹的这些都要考虑进去。有些管道位移比较大的话，我们需要多留一些净距的。

黄鹏：有些空间少，挤不下的时候我们设的低于净距 100。

1『管道默认的间距按净距 100 考虑，并且保留可以手动修改间距。』

大龙：

面板需要输入的信息：1）管道的顺序，自上而下对应于自左往右，在面板里拖拽调整。2）管道净距。3）放在哪一层。

1『外加上后面说到的管架号信息。』

模拟场景：1）系统图里把所有的管道数据导出来。2）面板读出所有的管道数据，放到面板右侧，默认都弄个管架组件。左侧面板里分割成 4 个层窗口。可以把右侧管道拖拽到左侧窗口面板里。

郑重：管道层一般 3-4 层。

沈琦：桥架的布置和管道的布置是不一样的，桥架是叠起来的。

黄鹏：桥架的逻辑其实也简单的，一层二层三层，多层的就是网上堆。

徐骋：检修通道如果能说清楚也能做的，无非是控净距的。

沈琦：做这个的目的是 2 个，一个是生成剖面图，一个是后面的荷载。

郑重：桥架的布置还是有一点复杂的，因为它不都是一个尺寸的。200、400、600、800、1000、1200 都有的，还有高度也不一样的。尺寸倒不是最重要的，排布的形式才是最复杂的，要考虑的东西很多（怎么叠、怎么考虑检修通道，还有预留位置）。

大龙：目前的思路，管道直接生成出来不用怎么改，桥架的图形生成的是默认版的，后面人工干预自己调，包括桥架的间距、排布的一些上下，还要分电气、仪表的不能放一起，很多因素。

郑重：

检修通道我们先自己画画，侧面的检修通道，也可以叫巡检通道。检修通道是要提给结构专业的。

管子的预留。不怎么好说，一种是明确预留什么东西的，可以摆进去、算出来，有一种是未明确的，通常我们是摆 D150（6 寸）的水管摆满，去估一个荷载。

这里要不要跟管架平面图关联，比如平面上的管架号和剖面图上的管架好。

沈琦：

平面图上没那么多信息，就一个管架的宽度、跨距。我们现在提结构条件提的是线荷载，多少 KN/m 的数据。

给结构的条件表，我目前的观点是可以优化取消掉的，结构其实不看的。结构是直接看我们的剖面图，每一层有多少的线荷载。每一根管子的线荷载我们是直接画在剖面图上的（跟工艺的荷载条件类似）。结构现在的设计是建模，模建好了，荷载一输入就行了。只要剖面图生成后，把每个管子的线荷载做一个加和，弄一个总荷载给结构就舒服了，结构喜欢这种直观的。

1『想到前天跟王玉松聊图集库管理系统时，也提到，做外管的荷载条件是也要跟她一起商量下，怎么把荷载数据给他们方便直接提取使用。（2022-03-19）』

大龙：结构专业做他们的东西应该需要 2 个：1）每个管架的线荷载总和。2）管架跨距，每个管架前面的跨距和后面的跨距，取个平均值，比如一个支撑管架，前面的跨距是 12m，后面跨距 10m，那么结构算荷载的时候是线荷载乘以 11m。

沈琦：应该是的，跨距信息我们的条件里不提的，但管架平面图我们是一定给结构的，那么结构应该是自己在平面图里读取的。

徐骋：架管平面图上的图层、图例要统一，后续好直接提取数据。

1『数智设计提供图例。』

黄鹏：我们是拿总图做底图的，肯定是 1 比 1 的。

大龙：剖面图生成的思路，我之前还想过另一个方案，被否掉了。系统图里的管道数据提取到平面图拉 PL 管道，拉的每一根管子都附着管道信息，框选一个管架上的管道生成剖面图，管道间距也省掉自己输了。但后来黄鹏跟我说，你们一般是在画剖面图，定好管道的间距，后面再拉平面图上的管道的。

郑重：其实我们是有一个反复的，先做剖面没错，然后根据剖面来画平面图，平面图画完后，可能会回过来调整剖面图上的东西（比如间距），这样一个反复的过程。

徐骋：那么平面和剖面互相调整，这个功能还是需要的。

沈琦：管子生成的改为工程直径，我们现在想改成外径。

大龙：重量的数据按哪个为准，有计算公式版、天书里的跨距重量表、周余从有个重量表。

郑重：我现在用公式算出来的都会自己打个系数，算出来的跟天书的差 20-30%。就按天书的来。

沈琦：我的意见先按这个公式计算，每一层总的线荷载出来后，再一层的荷载打一个安全系数。我一般是 10% 再往上圆整一下啊。

安全系数是要考虑的，我们现在不是有个条件表么，条件表在算的时候间距是不一样的，跨距有些 12m，有些 10m，我们在提条件的时候都是按 12m 算的，这个过程中又有一层安全系数。如果取消条件表，那么这层安全系数没有。所以我们这边在这里还是考虑安全系数，保守点。

1『确定又天书的数据，保守点，而且有一个依据。』

郑重：我们在生成剖面图前的那个界面，也把管架号信息输入进去，那么管架一览表也生成出来，这就是我之前说的的想跟平面图的信息关联。

沈琦：直接在剖面图的图纸里生成管架一览表。10 个剖面直接生成 10 个汇总的管架表。开始的时候没管道安装图，我们是单独画剖面图的，所有的剖面图单独在一个 CAD 文件里的。

黄鹏：其实可以在调用生成管架表功能的时候，后台自动抓取最新的管架数据存到服务器。

沈琦：其实大龙你之前想到的方案二是很有用的，最后出图的时候在管架安装图里生成剖面图就用你的方案二（配管图里提取管道信息），前面我们提条件用方案一。

郑重：是的，方案二是很有用。两个方案的目的不一样，方案一我们主要是要获得荷载、管架布置的情况，方案二我们是要获得与安装图（配管图）的对应。

徐骋：你们后面配管时候的调整会跨层么？

郑重：要复核，看是不是有一个特别大的调整。如果只是物料管的调整，这些是小东西，没关系的。

徐骋：其实复核我们以后也可以做一个校验，调整后的数据跟之前提给结构专业数据的一个匹对。

郑重：

这种情况其实比较少的。

三维的模型能出剖面图么？现在三维模型抽出来的平面图不能看，我们还得自己修。因为三维设计人员不完全按我们的平面图建模，他们会根据实际情况做一个调整，那么就导致三维那边的配管跟我们的平面图不一致了。业主主要是看他们的模型，以他们的为主，这就导致我们的平面图没用了。所以我们现在很别扭，只能剖面图不出了。但是不出，业主要看桥架的，架桥三维那边又不做的。三维那边没桥架业主只能来看我们的剖面图，但我们剖面图上管道部分是不对的。其实我还是想要那个剖面图的。

徐骋：我们其实可以拿三维的数据，接到我们目前做的这套系统里，来生成剖面图。

罗安平：桥架，仪表的我还见过他们出剖面，但电气的我从来没见过。

郑重：

计算书这边，我希望是剖面图带计算书的，不要用我那个 Excel 表的模板了。一个剖面图，旁边就一个计算书的表，这样很清晰的。左边一个断面，右边一个荷载表。我都觉得我不需要再给结构提其他条件了。

那个 word 表估计还没法取消（黄鹏后来提供的给结构的荷载条件表），因为我们刚刚说的剖面图这边，缺固定点信息的。固定点是指蒸汽这种热管道的固定点，这个点会有比较大的推力，这个推力我们是要给结构提的，其他管架是一样的推理，固定点的管架有这个不一样的推力。固定点我们自己手动填写。

固定点的信息可以加到管架一览表那边体现，再加一列。弄一个条件版的管架一览表，出图的管架一览表里不体现。

徐骋：其实剖面图右侧的计算书的荷载表没必要提条件的时候生成，荷载数据直接在剖面图上表示出来即可，结构要什么就给他生成什么。荷载表的生成只是为上传公司 D4 系统服务。

郑重：结构主要要的也就是线荷载。

沈琦：

A 单体到 B 单体。A 单体出来的工艺管道编号跟我们的管道号不一样，外管上是我们的管道号，到了 B 单体那边，工艺接进去的管道号跟我们管道号又不一样，能不能有一个匹配校验功能。

业主经常会反馈：他们在安装的时候，起点、中间段、终点，管线号都不一样，这个对应信息哪里可以看到。

1『其实可以生成一个对应表提供给业主，不止工艺的，还有暖通、给排水的。（2022-03-19）』

郑重：大龙，这个就是我之前跟你说的管道核对的事情，我最头疼的。这个车间有那个车间没有，这个车间是 DN150 的那个车间是 DN100 的，这个车间是碳钢那个车间是不锈钢（再比如一根污水管，这个车间是不锈钢那个车间是钢衬），这些是经常性的问题。

徐骋：我们可以做自动核对功能的。只要是匹配错误的东西全部拎出来。

黄鹏：可以把其他专业提出来的管道信息放在 PL 线里（一小段的接头 PL 线）。我们在把两条 PL 线连起来的时候，只要是不匹配的管道信息就直接给我们提示。

郑重：这种形式好，甚至以后用它取代一次条件，这种短接头比现在的一次条件好多了，一次条件里的信息这里都有体现。原来一次条件没位置。
 
1.06min

## 20220320咨询陶斯豪的问题汇总

1、读取远程的块定义。自定义模块库的问题；结构节点库。

回复：1）提取块的时候把块里的实体对象数据也提取出来。2）提取的时候把块定义抽出来变成一个 dwg，直接将文件上传给后端。

2、格原的图框数据获取。

回复：已经自己折中解决，根据位置来判断是哪个字段。待优化：应该在字典对象里已经规定好了 key。

3、Visual Studio 的版本问题。

对 ObjectARX、ObjectARX Wizards、AutoCAD .NET Wizards 三者的理解。AutoCAD .NET Wizards 即使没装，引用那 3 个 dll 文件也是可以写程序的。

回复：陶是直接把 CAD 安装路径里的那 3 个 dll 文件单独拷出来放到一个供开发用的固定地方的。

4、天正天暖风管的自定义实体对象读取。

回复：1）陶听别人说自定义实体对象的数据可以通过 CAD 的 lisp 接口改；2）阴权威说读数据没有问题，写数据的可能性不大。大概率是不会放开写数据的接口的。待尝试。（2022-03-13）

5、触发器，比如自动保存时调用函数。

回复：可实现。

6、工具栏按钮的自定义图标。

回复：之前陶没具体做过，直接用阿里图标网站里的 16x16 像素图标即可。