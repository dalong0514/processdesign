## 20211119数智设计 D4 系统交流

前后台分离：

1、前台，作业线：设计人员使用界面。

2、后台，控制线：校审核人员、专业负责人、数据管理员。

### 碎片

空压站：

客户需求选择：氮气产气量、氮气纯度、是否一用一备等配套。这些其实可以放流程模块库那边输入。

### 记录

1、一个项目过来后，首先是一个「创建项目」动作，这个创建动作是在「后台」完成的。创建这个动作在后台又会包含很多，比如项目信息、各专业设计人员、工作流等这些基础信息。

1『此处的信息很多与项目经理在 D4 系统上填的是重合的，确认下 D4 那边有没有相关功能可以直接导出来。』

2、创建这个动作在后台完成后，对应的相关设计人员在前台就可以选择性的看到相关信息。比如说，现在工艺设计人员可以开始空压站的设计工作了，那么它会弹出一个任务（工艺人员第一步去做什么），比如是「做流程图」这个任务，那么工艺设计人员就要去完成这个任务（通过空压站流程模块库实现），实现这个任务后工艺会产生一系列工艺条件分发出去，下游专业弹出要进行的任务面板。

每个任务有一个状态：完成、未完成、反馈、驳回等。这个时候，每个后台会收到这么个消息，并对应于去做相关的处理。

各专业一系列任务完成后，出来的结果是「自动成图」。

3、后台模块的划分：人员管理模块（比如设计人员打上各个专业的标签）、任务列表模块。

4、生产的业务线和校审核的线剥离，是一个并行的关系。对应于前台和后台，校审核（后台）要校数据（数据应该是前面入库前就校审好了）、有没有同步、前台有没有按规划的路径去走。

5、业务流程卡片化。比如工艺开始做空压站了，会弹出一个卡片（任务01），卡片上有状态（未完成、待审核、驳回、已完成等）。做完一个任务后，数据就要传递到旁边的「控制线」上。

墨菲：审核的操作不涉及直接跟 CAD 交互的话，比如只是下载文件，是可以单独拿到后台那边去的。

6、那一个具体典型的业务，套进这个框架里形成一个具体的业务线（包括前台和后台）。

7、前台只是一个任务流管理软件 + CAD 交互。

墨菲：如果按这种模式来做，前台只是一个任务流管理软件，通过卡片、任务的形式来展现。

前台那边其实有 2 大类操作，一类是卡片式的任务流（甚至包含比较复杂的生产性操作，比如暖通的洁净空调页面）；另外一大类是通过数据跟 CAD 端交互（占大头）。

墨菲：真个前台客户端，分左右两部分。通过 Tab 来切换，左边的是一个页面，包括侧边栏，是任务流部分；右边的话是一些工具栏的东西。

8、最终要解决的问题：项目开始创建后，到各个专业自动成图。这个过程在数智设计 D4 系统上都能看到。

9、业务线的节点理出来。

一个专业给哪些专业提哪些条件是固定的，这些节点都要理出来，再看一下这些节点如何去一个个串起来。

10、先做一个简单的业务线，比如罐区、空压、冷冻。

复杂的业务线总共可能有 15 个节点，那么我先打通一个简单的业务线，可能只有 5 个节点，那么下次做复杂的就只需再做 10 个节点。一定是打通一个完整业务线。

11、理出流程图。包括用户具体去操作（action）的流程图。

## 20211121谢雨东交流冷冻站模块

问题：

1、并行的任务卡片，在流程图里如何表示。

作业线的任务卡片：

数据输入及计算：

任务 01：工艺专业各单体条件。（车间，工艺专业）

任务 01：暖通专业各单体条件。（空调，暖通专业）

任务 02：数据的初步汇总。（仅显示）

任务 03：方案选择后的数据汇总。

任务 04：冷冻系统的设备选型。

输出成品：

任务 11：生成工艺流程图。

任务 12：生成设备一览表。

任务 13：生成管道数据表。

任务 14：生成主要材料表。

任务 15：生成布置图设备块组件。

中间过程数据：

任务 21：生成仪表条件表。

任务 22：生成电气条件表。

任务 23：生成布置图土建条件。

1、各个单体的条件表。从每个单体的条件开始，参考公司的条件表格式，后面加增加了几个属性字段，我个人觉得对我来说是有用的，比如分期、来源。这个只是冷冻，其实其他共用工程都可以采用这种形式，蒸汽、空压那边。

条件进行校核、审核，这个可以参考公司新版 D4 的进度条。

2、数据的初步汇总。按专业汇总，工艺专业和暖通专业所有的单体用到的冷热量进行一个汇总。

3、动力车间的冷热源（主要任务）。

汇总有几种方式，这里涉及到方案的选择。比如：1）工艺和暖通是分开的，还是合并的。2）同时使用系数。3）整个系统的型式。要先定好方案，根据选择的方案把汇总数据弄出来。

注意：刚刚说的汇总是动力车间的，之前的信息里有一个「来源」，有可能是直接放在车间的，那么此时汇总是汇总到车间里的。

此时汇总的数据即为冷冻站的最终数据，汇总的数据仅显示，不需要校审，方案需要校审。

4、设备选型。

根据系统汇总的数据进行设备选型，比如一期用几台设备多大的、二期用几台。这个环节是需要校审核的。

水箱、水泵等。

5、成品。

流程图、设备一览表、管道数据表、主要材料（综合材料）、布置图（标准模块）。

6、设计线、控制线、校审线。

控制线：比如 6 个单体用冷冻，目前只有 4 个条件上传有数据，缺 2 个是不能进入到任务卡片 03 的（不让汇总），这里做的控制是在控制线上实现的。这里进行控制的责任人：项目经理或分项，冷冻这里是分项。像这种控制，校审是看不出来的，必须分项来控。所以控制线和审核线是两条不同的线，不过这两天线都是放在后台实现的。