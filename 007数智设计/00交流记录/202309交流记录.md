## 20230912与沈洋交流排水构件模块

### 提炼总结

1、排水沟的剖面图画法，穿道路的和穿绿化带的是不一样的。




我理解，但实际上我现在想要获取的是总图中不同宽度，比如三百五百的沟的信息，以及他们的深度信息，不需要的部分实际上可以忽略。

你是需要生成一个个节点信息，而总图上的布局其实没有实际的用处对吧？记得丁智雄在和我讨论的时候也提到过这一点，总图上的起点终点可能都不是最终的。


设计工程师 B：对的，实际上总图一般以实际的图纸为准。我现在的想法是，可以看一下每个人标注高度的图层是不是都一样的。如果是一样的，那么就可以直接根据这些信息生成详图。

设计工程师 A：我理解了你的想法。那你先试试看，不会影响你的正常使用。像你说的，比如有三百的尺寸，你将它作为输入参数，然后根据深度的变化直接生成详图。

工程师 A：我们应该先断开某些步骤，这样你就可以有充分的时间来做出优化的调整。如果你试图一下子就将所有事情都完成，最后可能会发现你的速度太快，其他专业都赶不上，因此，现在最重要的是先断开某些部分，等上游部分弄好后，再重新连接。

工程师 B：确实，现在我正在做这个，有些部分需要先断开，等待上游完成后再进行连接操作。

工程师 A：那我就去问一个最简单的，关于你之前的小的排水池设计，是否也对你有很多的限制？我发现在根据项目号或单据号输入相关信息时，实际上并没有多少具体的数据。

工程师 B：对，这是因为上游尚未提供完全的数据，所以我在输入时，往往没有太多有效的数据。

工程师 A：所以，我在想为你做一些改进。比如，当你需要输入一些数据时，例如排水池的大小和进水管的位置等，你可以直接引用已有的数据，如果没有的话，你可以自己填写，这样在设计时你至少能够有一些参考。

工程师 B：这样做实际上是很好的，我可以根据需要，自由地输入或选择我需要的数据。

工程师 A：是的，我的建议就是让你把这些数据都作为输入，需要时自己输入或是引用已有数据。只有在上游完成后，你才将它们重新连接，这样你的工作就成为了兼容性更强的方式。

工程师 B：那实际上我在做设计时，最初的输入信息还是我自己先给出的。等上游的部分完成后，再把相关信息引过来。

工程师 A：我支持你这样做，虽然这样干预不会省下很多的时间，但至少从实际的角度来看，你可以使用。

工程师 B：对，虽然省下的时间不是很多，但至少我可以更好地掌控设计。

工程师 A：我看你的设计中有没有包含污水池的界面？我注意到排水构件的整体设计，你进行了吗？

工程师 B：这是两个不同的问题，我会分别处理。

工程师 A：关于污水池的设计优化，我提过一些思维导图。在你操作优化的过程中，你可以按照我之前的建议，将我们针对纯净水的设计参数输入到软件中。实际上，只需要一行数据就可以将这些信息导入到你的面板里。

工程师 B：所以我只需要点击一下输入初始数据，然后软件库里会有这些数据吗？

工程师 A：对的，如果库里有数据，软件会自动提取并填充到面板中。如果没有，则需要由杰构他自己进行数据输入。他可以选择几种不同类型的勾选选项。然后按照配筋表选择一些配筋就可以了。

工程师 B：了解了。对了，你提到楼梯设计优化了吗？

工程师 A：是的。我们考虑过将构造楼梯的各个细节移到结构设计部分，但是还未完全修改完成。

工程师 B：那个问题确实有点复杂。我知道楼梯设计部分是由建筑设计部门完成的，他们用的是天正软件设计的，而结构部门则没有这个软件的授权许可。

工程师 A：是的，建筑部门自己说他们的设计不完全是在天正软件上完成的。但我们需要考虑的是，他们需要迁移的数据究竟是我们生成的还是他们自己在建筑部分设计的。实际上，他们在天正软件里的设计与天正的展示有区别。而结构部门要在这份图纸上进行修改，他们需要提取一部分记分出来进行修改。

工程师 B：如果他们什么修改都不做，直接移入过来，我们是完全可以接受的。

工程师 A：是的，即便他们在上面做了一些修改，我认为也不会有太大问题。基本上，我们会清理掉无用的数据。只是由于没有天正软件授权，他们的修改不能直接反映在我们的图纸上。

工程师 B：我明白了，那么我们只需要按照他们的参数调整即可。

工程师 A： 是的，但是这样做的工作量会很大。你需要将所有的参数都调整过来，然后在结构部门创造一个对应的快照模型。虽然这很耗时，但我相信你有能力把它做好。

设计工程师 A：对了，关于设计中的那个部分，你要研究下它能不能自动调整为 T3，你还记得吗？

设计工程师 B：的确，那是主要放于楼梯上面的排水沟。所以你的意思是我把它转为 T3 之后再进行切割，这样我们就能用了？

设计工程师 A：对的。实际上，这样处理可能更简单，至少我们可以使用转为 T3 的部分。其实，现在你应该看的主要还是平面图这个部分。

设计工程师 B：你们的意见已经大部分采纳并修订了。我觉得已经可以用了。

设计工程师 A：是的，可以使用的部分你可以先开始参考着使用。我觉得项目中可能有一部分你需要复制线靠岸，大的东西我们应该可以给你们生成。

设计工程师 B：好的，我可以尝试一下。不过有些功能还在调试阶段，不能立刻使用。这个问题我们需要弄多久呢？

设计工程师 A：不能确定具体的时间。毕竟这是一种产品，它可能会有不同的类型。等你研究完了，你要自己把记录整理一下，还有就是你需要确定用到的构件样式。

设计工程师 B：我明白了。我必须自己选出想要生成的产品样式，然后给你们详细的配筋深度。

设计工程师 A：对的。一旦你选择了系统中已有的十个样式之一，作为管理员时你需要添加需求，特别是选择了含盖子的样式后，你需要知道生成它需要哪些参数会改变。

设计工程师 B：我看到我们的产品图框里诸如这些阀门井，水封井等都已经包含了。我们之前拟定的这几种形式，例如这个项目用到了这两种样式，我就把这两种复制过来。

设计工程师 A：对的，你还需要根据具体使用，比如可能只使用了三种样式，就勾选这三个，并对这三个进行详细信息输入。其实流程是相同的，我们可以让孟飞进行交互式设计。

设计工程师 B：这样就简便多了。输入完成后，我只需要插入就可以生成这个界面。现在我们需要找确认设计样式及表格信息，剩下未选的部分，只需要删掉就行了。

设计工程师 A：对的，你需要画出图，并找他确认样式，然后把这个表格及样式确认好就可以了。使用到的样式例如 K 金等，还需要生成一个相应的表格。你只需要保留用到的部分就可以了。

工程师 A：实际上，目前我们已经解决了两个问题，首先是总管的排水沟按照预定的方式进行设计。然后第二点是，在优化物美设计过程中，我们顺希把排水构件的设计引入进去。

工程师 B：对于剩下的两项任务，还需要对你的车间排水设计做进一步的观察与优化。首先，关于总体设计的问题，我认为你的车间排水设计应该和刚才提到的总体流排水设计有一致的功能，这样才能保证两者的兼容性。但是，对于车间的设计，我需要详细的平面图，也就是你的结构设计图，以便我们可以清楚看到整体的设计布局。

工程师 A：关于图层的问题，我已经读取了 SQQ 这个部分。他们画的沟镖的位置似乎都是针对白水的处理，这似乎是一个通用的设计图。至于我的方面，我需要在基础图中加入这部分的设计，把水放进去，并做好配筋设计。然后，这里需要两个阀门井，不过这应该不会有问题，阀门井可以单独制造。

工程师 B：对于给白水的设计，他们应该已经标出了水的深度和起点的位置，这一点应该不会传递错误的信息。

工程师 A：如果我们需要做污水池设计的话，我建议在原本的两个设计之间填充一些内容，以保证水能更好的流动。并且，我觉得我们在处理这个问题的时候需要考虑图层的问题，因为即使你能识别到图层上的信息，却依然需要将这个信息把握准确才能进行设计。

工程师 B：他们关于水的描述是不是都固定的？负责超管的人队伍是否都遵循这样的方法呢？

工程师 A：有的时候他们的 B 二和赛马程式的描述一致，这时候我们只需要按照原有的设计方法就好了。对于我们需要修改或是填充的部分，也可以采用先提供一个循环写计归的方式，然后往后面调整以满足设计的需要。

你：您可以看到，我的工作方法主要是为你制作面板，你自己来确定框架。如果我识别的内容有误，你可以及时告诉我，我们将对情况进行修正。就像软件不能识别我特定的工程程序一样，我们可以通过及时反馈和进一步考虑来解决问题。在应急情况下，你也可以自行输入信息。这对于进一步改进我们的工作方式非常有帮助。

你：你需要进行平面设计，并获取定位信息。你应把这些信息作为成品，给他们提供。他们需要什么信息，需要什么数据，你只需要简单的操作，比如框出，然后在面板上显示出来，然后生成他们所需的信息。

你：我理解排水沟的详细图就像总图一样。在这方面，阀门井的平面和口面就像我们原来做的水池差不多。所以你只需要找出缺失的阀门井，然后分解这个问题。他们需要的所有信息，应该是在底图里找。

你：这些勾是你贴上去的，你也可以为他们添加标注。你需要找出池子，然后与他们所需的元素对应。这就是他们需要完成的任务。

你：基本上，你需要在原始地图的基础上进行操作，删除某些部分，然后复制出需要的资料。他们提供的地图是基于你的基础图的，但实际上，他们需要全部的信息，他们要生成的内容是根据另一张图来完成的。

工程师 A：是的，我们需要根据文本信息来规划和设计。很多内容是我们自己生成的。关于底图，我可以自行生成一个结构块。

工程师 B：是的，你可以先生成这个结构块。然后使用一种命令将它插入。但是你必须确保插入的位置是准确的，比如说在 EA 轴的左下角位置。

工程师 A：对，我的准备工作都完成了。我们的轴线号会完全一致，我会以这个轴线为基点执行操作。同时，我会尽可能地提供这个设计中所需的所有参数。

工程师 B：对，我们必须考虑哪些参数可能会发生变动。首先，你可以从总管的排水沟开始设计，然后根据已经选择的型号，在数据中生成相关参数。在连接小型水池后，可以把它视为总图的排水沟。

工程师 A：每个设计阶段我都要确保数据无误。我会做出一个展示界面，加上之前的阀门井，这些其实就是需要顾及的所有情况。阀门井在设计过程中会有两个位置需要安置。

工程师 B：是的，还有水封井的设计也要考虑进去。虽然设计形式类似，但是尺寸会有所不同。你需要知道哪些参数可能会发生改变，比如说长和宽，这非常重要。

工程师 A：我明白你的意思，长宽会作为一个输入性参数。然后，根据图纸我可以决定怎么分割结构。如果宽度是固定的，我就不需要提供这个参数。

工程师 B：是的，如果宽度是固定的，就不必提供。这样可以避免繁琐的参数调整步骤。

工程师 A：我们需要绘制一张图展示这些设备，比如水池。你需要标明哪些地方須要改变，如高度，你可以用红色表达出来，或者用其他颜色表明。

工程师 B：好的，那我画出来直接发给你就行了，车间的工人只要看懂图中的标注就可以进行生产了。

工程师 A：对，你只需将这个图发给他们，然后他们会按照你的图进行生产。你可以尝试先决定排水沟的位置，然后再决定其它部分的设计。

工程师 B：好的，我明白了。其实这个固定的数据我们可以直接选用，制定出一个固定的样子然后固定下来。这样更简单，不需要在图中体现出来。

工程师 A：你这个结构设计其实有点类似我们前段时间做的图库管理系统升级，尽管只有十种形式，但是可以满足我们的需求。我们不需要在乎每个构件的尺寸，只需要知道它的参数在哪个范围，然后在表里面体现出来。

工程师 B：我明白了，我们只需要完成生成每一种构件，比如，如果他选了三个参数，我就需要生成三个节点，这三个节点则具有不同的参数，这些参数会在表中体现。

工程师 A：加之，在生产过程中需要配置的各个部分，比如阀门井和水封井，也可以完成制作，细节部分按比例更换即可。

工程师 B：我明白了，我会按照这种方式来设计的。

工程师 A：另外，生成的表格需要对齐，然后填入具体的宽度和深度数据，这样我们就可以根据表格生成具体的构件了。

工程师 B：好的，我知道了，开始设计去了。

工程师 A：如果我们需要穿越道路，那么在界面图显示中进行总结，其实就涉及到三个关键的部分。第一部分是那个总体的排水沟设计，然后我们要对原来的污水池进行一次优化，这是我的优化建议。并且，还需要修改一些参数，让设计更为符合实际需求。

工程师 B：那第三个部分是什么呢？

工程师 A：第三个部分应该在完成前两部分的基础上进行。我建议你先完成前两部分的设计工作。因为它们像是一个组合体，既有排水沟，又有污水池。我现在还需要设计结构楼梯，你可以先去研究一下。而我认为这并不会影响当前的工作，你可以先找出方案，我到时候可以和你一起探讨一下是否有更好的解决办法。

工程师 B：现在有哪些方式可以考虑呢？

工程师 A：我觉得现在有两种方式可以考虑，一种是能够自动通过程序将其转化为三维模型，这样的话工作量应该会小很多。另一种方式是将原本的设计还原，利用我们的动态模块将建筑图形进行绘制和还原，然后模拟沟通结论。






###  原始记录

大龙：

排水构件主要有三块内容，一个是总图的排水沟部分，一个是车间或罐区的排水沟部分，包含阀门井、水封井。最后一块是之前做的小型水池迭代优化。

沈洋：

查看总图的目的，就是我想知道有多少不同宽度的沟，如 300，500 等等，然后找出最浅和最深的深度。所以我需要这些信息。

大龙：

是的，因为你需要生成一些节点，实际上总图的布局对你没有用。我和丁志雄讨论过，他说在总图上，起点和终点可能都不是最终的，应该以他们的图纸为准。

我的意思是，你可以先暂时停下，让我先给你做，这样至少不会影响你的使用。你将需要的尺寸，例如 300 等等，作为输入，然后选出最浅和最深的部分，将这些信息作为输入，就可以生成详图了。

在设计的过程中，我们可能需要先断开某些数据流转，然后等上游模块设计好之后再连接。不要一开始就急于求成，这样可能会干扰其他专业的设计流程。

沈洋：

你的想法我理解，现在是先断开一部分，然后等上游完成之后，我们再按照我们的管理方式进行连接。这样我们就能保证自己的工作得以执行。

大龙：

对，这样就好。在项目中，小型排水池的设计你那边应该遇到过这种情况吧。根据项目号，单体号拿不到水池的数据，这是因为上游的给排水没有用数智设计模块做水池的条件。

关于这个问题，我在想是否可以做一些改进。比如，我们可以提取相关的框图数据，像宽度、长度以及入水管位置这些。只要这些信息更新，我们就能用这些数据进行初始化。没有的话，我们就自己填写这些信息。

沈洋：

你这个思路真好，我们就可以脱离他们的数据延迟了。你先按照这个方式进行处理，无论他们那边是否更新数据，我们都能继续工作。

大龙：

那个污水池的优化意见，他提到了一些关于思维导图的点。你在优化的时候，就按我前面说的，排水的参数需要在我们的软件里输入。实际上就是把一行数据整合到面板里。就是说点一下初始化数据，如果库里有数据，就直接填充过来。如果没有的话，就让杰构自己去输入，然后根据这几种不同的类型选择配筋。

补充：这里穿插讨论了下结构楼梯间的优化问题。楼梯平面图需要把建筑楼梯平面图的一些图形复制过来，但建筑那边是使用天正建筑实体对象生成的。没法直接复用。陶斯豪想不到解决方案。目前的 2 个思路：1）自动把天正实体对象的图形转为 T3 版的再复用。2）做数据流的动态块取代天正实体对象图形。

总图排水构建这边的思路。

1、做个基础样式库，比如总管 10 种。

2、用户选择需要用的样式后，输入节点需要的参数。再自动生成节点详图。

那对于需要的设计，他们可以在我们提供的库中进行选择。然后根据实际需求输入具体的参数。

为了方便使用，我们可以做一个表格，在选择完所需的配件后，可以直接输入相应的参数。

让我来说，我们这个工作，其实就是按照以前的思路进行。我会给你做个面板，你会在上面进行操作。如果遇到有的排水沟或者排水构件识别不出来，你马上告诉我，我们会对这种情况进行处理。一旦找出问题，我们可以继续优化程序，这样我们的工作就会更进一步。

操作后，再在面板里显示出来。水沟要生成的详图其实就跟总图的水沟是一样的。然后，里面的阀门井和口面之类的，其实跟我们原来做水池的是一样的。也就是说，如果他需要的某一部分没有，我们就分解出来。结果就是他所要的东西。

排水沟平面图这块。我看到的底图都是给排水提供的，我们只需要在上面添加标注对吧。

沈洋：

对，这些都是从他们这里拿来的，你只需要对他们需要的内容进行标注。比如他需要生成 ABCD 四个元素，你就找出他这四个元素对应的位置进行标注。

基础底图是我们自己的。

大龙：

只需要一个命令插入，然后把所有需要的东西从他那边获取过来。但我们确保所有数据都存在于左下角或 1-A 轴。因为我们的轴线号是一致的。

陶斯豪你需要先完成总图的排水沟，然后再处理数据参数生成的型号。这样就可以理解为是总图的排水沟以及你之前做的小型水池的一个结合体。

阀门井和水封井都是按照相同的方式来处理，只是大小不一样吗？

是的，如果你需要改变某些参数，你必须明白他的意思。比如说，长和宽必定是一个输入性参数。只要是有变化的数据，都需要提供。然后他需要知道你是如何进行划分的。这样他就可以从图纸中读取出来。如果宽度是固定的，比如固定在两百，那你就不需要提供这个数据。

你需要将这些信息呈现在图上，那些需要变动的部分需要特别标识。比如说，你之前设计的水池高度，你可以将其标记为红色，或者用其他颜色标记，这样就能给他一个直观的表达，而不仅仅是文字描述。

沈洋：

我个人建议你按照特定的详图。我们基本上都是根据实际选择的数据进行设计，因此它的样子其实是固定的。你只需要将其对应的尺寸比如宽度和高度在表中体现出来就好。

做一个个模板，用户选了该模板后，节点详图的实际尺寸无需按 1:1 绘制的，数据的变化在尺寸标注那边体现即可。附带一个配筋表。

大龙：

总结下来，其实主要就这三个东西：刚刚讨论的总图中的排水沟设计，其次是污水池的优化设计，最后一个是车间/罐区的排水构件。

处理完这三个问题，然后再去研究结构楼梯的。

目前有两种方式解决，一种是能够自动将其转成 T3 版图纸，这样的工作量可能会相对较小。另一种，你可以考虑自己做数据流的块将建筑图形原样还原，然后做个动态块去贴到结构部分。