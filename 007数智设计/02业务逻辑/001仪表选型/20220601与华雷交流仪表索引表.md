## 20220601与华雷交流仪表索引表

### 提炼

仪表索引临时表里需要的字段：

仪表位号

仪表大类

仪表类型

仪表用途

流程图号

所在管线或设备

仪表系统（DCS/SIS）

是否配安全栅

如果是阀门的话，额外增加字段：

阀门附件

本安/非本安

### 记录

华雷：

应该是在生成索引信息后，再打勾加备注。因为就算我这个项目整个都要求是本安型，但我有些仪表是只能做隔爆的。隔膜的话只有这两个，本安的话就多了一行安全栅。我们平时用的是公式，跟编号原则有关系的，就是我们后面加个 M，代表安全栅，再加个后缀代表本安。这些跟选型要求一样的，有些元件。

举例。这是一个常规的（隔爆）仪表，前面说了是要有附件，正常的话，就前面 2 行，前 2 行是阀门。像我们的温度、压力、流量、液位，这些标准的模拟量仪表，这种 AI/AO 的东西，就前 2 行。隔爆的阀门的话，这三个属于它的附件。这个是安装管道设备号（Excel 里管线或设备号），这一栏有数据的仪表都是安装在管道或仪表上的，我们有公式弄过来的。这是它的三个仪表，这是源头，如果一旦是本安的仪表，那么后面再加一个附件，就是我这个仪表要先经过安全栅才能再进系统。所以，对于我常规的仪表来说，如果是隔爆的，这个是系统位号（第一行），这个是仪表位号（第二行，工艺提的 ）。第二列是代表它的用途，没有的话就是空白的。第三列是仪表名称。一旦碰到非隔爆仪表，那么就要加安全栅了。它的仪表的信息，是通过安全栅发出来的，仪表对应的就没有信号类型了。AI 代表信号输入，它叫输入安全栅。看这里的调节阀，它的信号输出是 AO，输出安全栅。

『

补充：（2023-07-04）

1、第一列的仪表位号，第一行是工艺的回路号，第二行是仪表的位号。

2、仪表临时表那边，是否配安全栅填了「是」的话，那么仪表这边增加第三行，输入安全栅，信号类型（AI）填到输入安全栅这一行。如果没有配安全栅的话，信号类型（AI）是填到仪表那一行的（第 2 行）。

』

大龙：

系统号是从哪来的？回复：就是工艺提的仪表位号，下面的几行都是转化了的位号，看我之前给你的选型逻辑里有位号的处理。

我在想能不能弄一个中转的临时索引表，一个仪表一行数据。额外单独加的字段汇总：1）比如安全栅的就加一个字段，勾选是否有安全栅。2）进哪个系统，如果有 SIS 的是进 SIS 系统。3）仪表类型肯定要。4）所在管道或设备位号。5）阀门附件（开关阀调节阀的话）。6）本安还是非本安（开关阀调节阀的话）。

华雷：

数据表的索引页面解决方案（临时表里不设这个字段）：

跟索引表里仪表的序号是挂钩的，根据后面生成仪表数据表时的页面信息反填会成品索引表。原来给了你一版仪表数据表模板，Excel 文件名那上面本来就是有个序号，1、2、3、4...，一般是按照这个序号来的，但没有这个仪表，后面的仪表是往前排上去的。不是说电磁流量计永远是 05 的。

刚刚说的上面的仪表，都是根据工艺条件抽出来的。我当时考虑过你的这些问题，我当时专门把可燃气体（可燃气体不是工艺这边的，是我们仪表自己做的），可燃气体的仪表位号，我是直接从 -60、-61、-62 开始了，可燃气体仪表位号序号都是固定的，我也是自己往上加的，你这个就不用管了。你就按照数据表的模板，把工艺的仪表弄上去就行了。

安装图的图号没法弄的。数据表的图号都是 -03KS，它是一个小的分号，但安装图不是的，一个项目里有哪些图纸，我是要自己排过一遍，把目录做出来我才知道的，安装图永远是在最后一张图里，安装图的图号是不知道的，安装图的逻辑还没做，安装图的页面就更不知道了。安装图我们到时自己做，安装图比数据表更难做。

临时索引表里阀门。阀门要配什么附件就不一定了，可能配 1 个电磁阀可能配 2 个电磁阀，有可能配定位器。

大龙：能不能通过一个代号去匹配阀门组件的组合形式。

华雷：

是可以的。这里阀门的位号，这里什么样的配置，这个是跟数据表里数据挂钩的。阀门附件可以选本安也可以选非本安，每个阀门的本安非本安是要单独定义的，加一个字段。每个附件，都可以配安全栅。

说白了，只有阀门才有附件的问题。附件不管有几个，都要有个选型是否是本安。其实可以把这个组合放到统一规定那边去，统一规定里加一个「阀门附件」，比如可以配 6 种。定位器本安非本安、限位开关本安非本安、电磁阀本安非本安，也就这 6 种。可以把这个写在防爆形式的选型里，只要阀门类型定了，那么阀门附件的配置就定了。有哪些互斥的选项，我到时也列一下。

华雷：

这个临时表里，把工艺条件的数据都放过来。

还有一个麻烦的是哪个调节回路。我们之前是根据仪表条件外加流程图才能看出来的。调节阀跟着哪个回路走的数据流现在应该提取不出来吧。

大龙：调节阀的仪表位号不是应该按回路号来设的么。回复：现在工艺提过来的条件很多不是的，调节阀是自己编的。

华雷：

我现在做调节阀回路号的方法。仪表的系统位号中间，如果是调节阀的，工艺位号里都是带有 C 的。带 C 的我先默认当它是有调节阀的，筛选出仪表这些带 C 的后，再去跟调节阀里的阀去做匹配（这里应该是根据控制点名称去做匹配的）。匹配上的话，一般肯定是仪表的数量多，调节阀的数据少，肯定是以调节阀的数量为准。调节阀数据多的才麻烦，多的话，无非是几种场景：1）要么是控制风机。2）要么形成了串级回路，而且如果是串级回路，我们是要把这个信息写在监控表的备注里的。一定不能让有 C 的回路，没有被控对象，保证每个 C 都能落实。

这个地方一旦有人工干预，就有手动和自动的问题，如何去跟前面说的临时索引表衔接沟通。要么简单点，生成列表后，跟我现在人工的一样，调后面那列调节阀，如何快速的让人工来核、来加这些信息。这个列表我可以下载下来，后面有一列是「调节回路」，我自己把对应的有些位号加上去，如果没有位号，那么我自己备注：XX 控制回路的串级回路或变频控制某个设备（风机）。我自己加备注，要么备注阀门位号、要么备注设备位号、要么备注串级回路位号。加上去后，再把这个传到服务器。这个数据也可以用于后面的监控表。

1『这个备注列，匹配到的对的阀门位号可以自己先填充一版的。（2022-06-12）』

还要加上一个系统判断。一旦这个调节回路里，比如 PIC，但没有任何备注，那么这个时候就要带有提醒功能了，是不是要把流程确认清楚。有的时候，是工艺阀门没提，有的时候工艺条件改了，仪表条件里还是 C，其实流程里没有 C 的了，变开关阀了。

调节回路只能自己来调。

大龙：在到临时索引表之前，要先有个功能去补充调节回路数据的。