## 3 月第 2 周

第 10 周，2021 年还剩 43 周

1、自动迁移建筑底图并更新（1/1）。

总结：目前是靠下游专业自己用该功能迁移建筑图纸，只做到节省时间，无法保证下游专业用的是同一个「数据源」（建筑底图）。问题：开发该功能的时候，发现如果要实现下游专业提取的是同一个「数据源」（建筑底图），那么必须保证建筑专业的设计人员画的「规范」，下游专业拿到建筑图纸后直接用该功能提取。但往往建筑图纸提取出来的底图要少量核对修饰。解决方案：根子在建筑设计人员上，可以尝试以设计流团队为试点，拉一两个建筑专业的人到年初成立的设计流团队，团队里的建筑人员我们约定好「规范」画图，下游所有专业直接提取底图。

2、流程图数据迁移到布置图并生成对应的平面设备模块（2/3）。

总结：做这个功能的时候，我们意识到流程的数据是一种「数据源」，那么这个数据源也可以是外部的文件，我们做项目往往先拿到业主的设备资料，可以先对业主的数据简单处理成 excel，在流程图（或布置图）里通过这个 excel 自动生成设备位号和设备图块。这两个功能在前期画流程、排方案，可以省很多时间。而且此技术也是「方框图生成 PID」实现的基础技术。

3、设备型号匹配更多设备数据（1/4）。

总结：把常用的设备数据放到一个公共库里，用一个型号（代号）去匹配，极大减少设备数据的输入。1）跟开发人员、设计人员讨论已经确定的数据库「表」的逻辑关系。2）此功能制剂组最先提出，以制剂的设备为试点。目前已经收集到制剂常用的设备数据。3）预计 3 月底开发完该功能，而且此功能是「基础性」技术，可推广其他专业。

4、方框图自动生成 PID 输入界面探索（1/5）。

总结：「方框图生成 PID」的实现目前有个难点：如何收集到各个「积木」间的关系。需要一个可以快速画「方框图」以及输入基础数据的界面。与开发人员交流后，目前有 2 个方案：1）页面端使用开源框架 Canvas 来实现该技术。2）方框图界面也是放在 CAD 里面。方案 1 需要的是一项全新技术，得花时间学，成本高。个人目前倾向于方案 2，准备用方案 2 试试，如果 3 月底前无法跑通流程就换方案 1。

5、设计流暖通专题会。

总结：谢雨东牵头我们成立了设计流数据一体化暖通专项组（共 10 人）。1）我跟谢雨东向组内成员做了数据流的宣贯。2）各个组员对数据、设备、流程均提了自己的一些想法；对目前可较大提升工作效率的点提出了诉求；对数据精准性提出一些顾虑、建议及想法。3）敲定今后每周一晚上 6 点在 5 楼会议室开个碰头讨论会。下周一讨论会将进行具体的工作安排。

想法：

仪表专业的问题。

### 下周计划

1、流程图数据迁移到布置图并生成对应的平面设备模块（2/3）。

2、excel 设备数据直接生成流程图设备位号及图形，或直接生成设备图设备位号及图形（1/2）。

3、温度计选型逻辑图整理并转为代码。

4、设备数据匹配（2/4）。

5、发布新版设计流数一体化 V2.0并整理文档说明。

6、暖通专题会。

宣贯会准备

暖通要把仪表专业拿回来做，想做暖通的仪表选型、IO 逻辑图，为突破口。

## 3 月第 3 周

第 11 周

1、流程图数据迁移到布置图并生成对应的平面设备模块（100%）。—— 已完成

总结：此功能作用的大小取决于「设备平面图形库」的数量。目前自己只建了常用的立式储罐、搪瓷反应釜的图形库。计划：依靠用户来增加图形库。目前匹配不到图形库数据的话，会自动生成一个「无匹配」的图形，用户看到这个图形后知道库里没有这个设备的图形，如果他自己手里有此设备的图形。他有 2 个途径：1）直接将图形提供于我，放入公共库。2）先在本地建立自己的图形库直接使用（月底宣贯会讲解）。我这边定期从用户那边收集图形库补充进公共的库中。

2、excel 设备数据直接生成流程图设备位号及图形，或直接生成设备图设备位号及图形（100%）。—— 已完成

总结：流程图中各个设备的外形图形库，收集思路同上。

3、温度计选型逻辑图整理并转为代码（10%）。

总结：此项工作投入时间过少。

分析原因：1）本周接近 3 天花费在开发暖通自动生成设备表。2）仪表选型的逻辑，华雷提供给资粮需要二次转化，我这边得消化整理成方便实现的逻辑图并与华雷确认无误后才能去编码实现，整个过程相对于其他功能模块更「麻烦」。所以当其他可以马上开发的功能一过来，自己会「本能性」的去把此项工作往后拖。

举措：后面自己多主动去跟华雷交流。周五找华雷聊的时候发现一个能马上产生效益的需求：自动统计仪表的安装材料，详见工作事项 7。

4、设备型号匹配更多设备数据（25%）。

总结：可以复用的设备型号数据，已完成数据库表单的搭建工作。

5、发布新版设计流数一体化 V2.0并整理文档说明（100%）。—— 已完成

6、暖通专题会。计算书 excel 表自动生成公司 CAD 成品设备表（100%）。—— 已完成

总结：1）确定了最先要做的模块「风机计算 => 风机库数据匹配 => 自动生成设备一览表」。2）确定了设备、数据、流程 3 个团队的具体人员。3）确定了设备、数据、流程 3 个团队负责的主要内容以及初步进度。

最优先开发的模块中目前已经完成了「自动生成设备一览表」，目前已经在使用。计划下周拿到设备团队提供的风机库完成「风机库数据匹配」。

7、仪表安装图材料统计（20%）。

总结：整个实现逻辑跟华雷一起打通了。6 大类材料，计划下周（第 12）把其中最繁琐的「管件」材料打通，拿出一个成品，第 13 周完成其余五项材料的统计。

8、土建总图设计流专项（5%）。

总结：3.17 日，邱总牵头，土建总图 10 来个人进行了设计流的专项讨论。明确了现阶段想做的内容：把建筑、结构、总图，复用性比较高的图形数据放到公共数据库，每个设计人员根据「搜索」直接调用。王玉松、方琼、陈学负责各自专业的「素材」收集。沈洋负责具体与我对接。另外：李奕峥跟我单独聊后有自己的想法，周末他会去整理下逻辑数据，我们想先做一个「自动生成罐区泵房」的功能。

9、方框图自动生成 PID 输入界面探索（20%）。

总结：之前考虑的技术方案 2 —— 方框图界面也放在 CAD 里面。细节性的技术试验了一下，目前认为可行。计划第 14 前打通罐区一个储罐，方框图自动生成一个储罐流程的组件。

10、设计流数据一体化实现「客户端产品化」（5%）。

总结：把设计流数据一体化打包成一个「客户端产品」需完成 2 大核心步骤：1）前端交互界面，转为客户端的开发，而且客户端是可以编译后放到用户电脑里的。这样看不到我们的源码。2）后端程序的打包编译。客户端产品化之后，顺带解决了之前保密室的问题，我们的产品可以直接安装到业主的服务器上供其使用，设权限和使用时间均可。

计划：1）之前前端我们是放在网页上的，跟协助人员商量后使用 Electron 技术栈开发客户端。目前的思路：新功能直接放到客户端，老的功能后续慢慢迁移到客户端。2）后端程序之前采用的是 PHP，无法编译打包，如果直接部署到业主服务器相当于泄露我们的源码。目前的思路：JAVA 更稳定而且可以打包发布，以后设计流系统做复杂后也会考虑转成JAVA 开发，正好常恃豪之前做 JAVA 开发，我会让他重新搭建一套 JAVA 系统，新功能开发直接放到JAVA 框架里，老的功能后续慢慢迁移到JAVA。

另外：临时 excel 文件可以缓解部分压力。

### 下周计划

1、准备月底设计流宣贯会资料并配合「朝闻道」发布报名相关通知。

2、准备4 月组设计流专题组会议的资料。

3、温度计选型逻辑图整理并转为代码。

4、仪表安装图材料统计。

5、设备型号匹配更多设备数据

6、方框图自动生成 PID 输入界面探索

7、暖通专题 —— 风机库数据匹配。

## 3 月第 4 周

第 12 周

主题：设计流数据一体化使用说明宣贯（工艺专场）；时间：3.31 日（下周三）。

1、准备月底设计流宣贯会资料并配合「朝闻道」发布报名相关通知（70%）。

汇总：1）统计人数的技术实现方案：用问卷星做报名收集系统，导出报名二维码嵌入到「朝闻道」公号文章里。2）宣贯内容的提纲已提交；3）宣贯的 PPT 还未做好。

2、准备4 月组设计流专题组会议的资料（50%）。

出版纲要已沟通交流，目前根据反馈意见重新梳理整合，并开始着手做 PPT。31 号之前将 PPT 发给孔总。

3、温度计选型逻辑图整理并转为代码（60%）。

已整理完毕，因华雷前几天出差，还未与其确认。

4、仪表安装图材料统计，除桥架和电缆外（100%）。—— 已完成

此项工作花费 3 天时间，但个人觉得很值，目前仪表材料统计很大工作靠人工统计，此模块投入使用后能立即产生效益。而且在仪表选型模块正式发布前我这边也急需一个能让仪表使用的模块，让大家有个具象认知。

5、设备型号匹配更多设备数据（25%）。

定型设备相关数据库表单建好后，此项工作本周未投入时间。

6、方框图自动生成 PID 输入界面探索（20%）。

已经开始代码的实现。徐骋清明后要开展一个多功能车间的流程绘制，我们计划以此为试点，先实现一个「多功能反应釜」模块，从方框图自动生成该模块的 PID 流程。

7、暖通专题 —— 风机库数据匹配（20%）。

风机库数据匹配实现的路径，我跟谢雨东商量后找到了更好的实现路径，具体工作开展要等下周一暖通专题讨论会之后。另外：谢雨东已经提供出了「洁净空调计算书」，待后续开发。

8、自动生成设备工程图纸（10%）。

陈宝锋总前几天出差，我后来跑去跟叶菁对接过 2 次，明确了以立式储罐为试点模块，先讲此模块实现。另外：交流的过程中有一个很大的意外收获。了解到他们设备专业有一款免费的 CAD 软件，下载使用「偷」到了一个特别有用的「技术思想」，可以推广应用到设计流的其他各个专业。原来二三十个积木借鉴其思想的话可以只用一个积木实现。

9、开发设计流数据一体化的客户端（15%）。

前端协助人员，这周末来了两天在帮忙写客户端，目前比较顺利，基本框架已经搭建好了，后续设计流新的功能计划直接放在新「客户端」，后续慢慢将老的功能迁移到客户端。

### 下周计划

1、完成设计流数据一体化应用宣讲会。

2、完成设计流专题小组汇报。

3、自动生成设备工程图纸（立式储罐）。

4、继续开发探索方框图自动生成 PID。

5、暖通专题。

6、开发设计流数据一体化的客户端。

7、工艺布置图里的设备，自动获取匹配所在车间位置的信息。