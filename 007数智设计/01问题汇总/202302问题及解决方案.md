## 问题及解决方案2021

### 01. 前端

### 0.2 后端

### 0.3 CAD 端

#### 01 天正软件触发阀门实体对象打断管道

2023-09-06

问题描述：做甲类仓库消防系统模块生成轴侧图时，蝶阀在管道上没有自动打断管道。用 CAD 里的 Move 命令移动一下再移回来还是无效，必须手动把蝶阀的那个块基点拖放搭在管道上才行。说白了是无法激活，没有激活的这个蝶阀，用天正软件里自动的统计材料的功能也无法识别出来。

解决方案：意外发现，有个止回阀统计材料的时候识别出来的，发现那个止回阀是画某个局部时放在管道上整体结块生成的。那么想到的方案，迭代放在一个很短的管道上，整体结块，生成的时候再打散。碰巧的是，天正软件里，那一小节管道如果放到一大节长的管道上，小节管道会被自动合并，还省掉了删除小结管道的操作。

2023-09-07

问题找错了。真正的原因：管道标高的问题，天正软件的管道是有 z 方向坐标的（有高度）。阀门的高度要确保与管道的高度保持一致。



